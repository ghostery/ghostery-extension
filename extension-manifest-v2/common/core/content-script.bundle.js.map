{"version":3,"file":"modules/core/content-script.bundle.js","mappings":";;;;;;;;;AAAA;AACA,MAAM,IAA0C;AAChD,IAAI,iCAAgC,CAAC,MAAQ,CAAC,oCAAE,OAAO;AAAA;AAAA;AAAA,kGAAC;AACxD,IAAI,KAAK,YAQN;AACH,CAAC;AACD;;AAEA,sCAAsC;;AAEtC;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,wSAAwS;AACxS;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB,GAAG;AACpB,mBAAmB,SAAS;AAC5B;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,QAAQ;AACzB;AACA;AACA,iBAAiB,UAAU;AAC3B;AACA,iBAAiB,UAAU;AAC3B;AACA,iBAAiB,QAAQ;AACzB;AACA,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA,mBAAmB;AACnB;AACA;;;AAGA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB,QAAQ;AACzB;AACA,iBAAiB,QAAQ;AACzB;AACA,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA,mBAAmB;AACnB;AACA;;;AAGA;AACA;AACA;AACA,iDAAiD,kBAAkB,EAAE,sCAAsC,MAAM,KAAK,UAAU,YAAY;AAC5I;;AAEA;AACA,gDAAgD,kBAAkB,EAAE,sCAAsC,MAAM,KAAK,UAAU,YAAY;AAC3I;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,gBAAgB;AAChB,gCAAgC,MAAM;AACtC,uCAAuC;AACvC;;AAEA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,eAAe;AACf;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,QAAQ;AACzB;AACA,iBAAiB,UAAU;AAC3B;AACA;AACA,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB,QAAQ;AACzB;AACA;AACA,iBAAiB,QAAQ,cAAc;AACvC;AACA;AACA;AACA,6DAA6D,gBAAgB;AAC7E;AACA,iBAAiB,QAAQ,cAAc;AACvC;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,mBAAmB;AACnB;;AAEA,+CAA+C,eAAe;AAC9D;AACA;AACA;AACA;AACA,WAAW;;AAEX;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;;AAEA,eAAe;AACf;AACA;;AAEA;AACA;AACA,WAAW;;AAEX;AACA;AACA;AACA,cAAc;AACd;AACA;;AAEA;AACA,WAAW;;AAEX;AACA;AACA,WAAW;;AAEX;AACA;AACA;;AAEA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,oCAAoC;AACrD;AACA;AACA;AACA;AACA,mBAAmB;AACnB;;;AAGA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA,SAAS;;AAET;AACA;AACA;;AAEA,OAAO,GAAG;;;AAGV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,GAAG;AACtB;AACA,mBAAmB,QAAQ;AAC3B;AACA,mBAAmB,aAAa;AAChC;AACA;AACA,qBAAqB;AACrB;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;;AAEA;AACA;AACA,YAAY;AACZ;AACA;;AAEA,0EAA0E;AAC1E;AACA;;AAEA;AACA;AACA,YAAY;AACZ;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA,gBAAgB;AAChB;AACA;;AAEA;AACA;AACA;AACA,eAAe;AACf,aAAa;AACb;AACA;AACA,aAAa;AACb,aAAa;AACb;AACA;;;AAGA;AACA;AACA,YAAY;AACZ;AACA,YAAY;;;AAGZ;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;;AAEA;AACA;AACA,+CAA+C,kBAAkB,EAAE,sCAAsC,MAAM,KAAK,UAAU,YAAY;AAC1I;;AAEA;AACA,8CAA8C,kBAAkB,EAAE,sCAAsC,MAAM,KAAK,UAAU,YAAY;AACzI;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAM;AACN;;;AAGA;AACA,IAAI;AACJ;AACA;AACA,CAAC;AACD;;;;;;;;;;;;ACrtCa;;AAEb,iDAAiD,mBAAO,CAAC,mJAAqC;;AAE9F,gBAAgB,mBAAO,CAAC,6HAA0B;;AAElD,uCAAuC,uCAAuC;;AAE9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qEAAqE;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH,CAAC;;;;;;;;;;;AClCD;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACNa;;AAEb,8CAA6C;AAC7C;AACA,CAAC,EAAC;AACF,kBAAe;AACf;AACA;AACA;AACA;AACA;AACA,sLAAsL,eAAe,+FAA+F,eAAe;AACnT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAe;;;;;;;;;;;AC7EF;;AAEb,mBAAO,CAAC,6HAA0B;;AAElC,kCAAkC,mBAAO,CAAC,6GAAe;;AAEzD,uCAAuC,uCAAuC;;AAE9E;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,wBAAwB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,iBAAiB,UAAU,MAAM;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE;AACtE;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AC5Fa;;AAEb,eAAe,mBAAO,CAAC,qHAAmB;;AAE1C,gBAAgB,mBAAO,CAAC,uHAAoB;;AAE5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,wBAAwB,WAAW;AACnC;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI,YAAY;AAChB;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,sBAAsB,oCAAoC;AAC1D;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;;;AAGJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE,IAAI;AACN;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,kDAAkD;AAClD;AACA,OAAO,KAAK;AACZ;;AAEA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,qEAAqE;;AAErE;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK,GAAG;;AAER;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;;;;;;;;;;;ACjLY;;AAEb,8CAA6C;AAC7C;AACA,CAAC,EAAC;AACF,kBAAe;;AAEf,mDAAmD,mBAAO,CAAC,4JAA2C;;AAEtG,sCAAsC,mBAAO,CAAC,sHAAwB;;AAEtE,uCAAuC,uCAAuC;;AAE9E,4CAA4C,kBAAkB,kCAAkC,oEAAoE,KAAK,OAAO,oBAAoB;;AAEpM;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,sBAAsB;;AAEtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;;AAEA,uFAAuF,oBAAoB,EAAE,oBAAoB;AACjI;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D;AAC5D;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,mBAAmB;;AAEnB;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAQ;AACR;;AAEA;AACA;AACA;AACA,QAAQ;;;AAGR;AACA;AACA;AACA;;AAEA;;AAEA,kBAAe;;;;;;;;;;;ACtIF;;AAEb,8CAA6C;AAC7C;AACA,CAAC,EAAC;AACF,kBAAe;;AAEf,eAAe,mBAAO,CAAC,sIAAgC;;AAEvD,qCAAqC,mBAAO,CAAC,oGAAW;;AAExD,uCAAuC,uCAAuC;;AAE9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,qGAAqG;AACrG;AACA;AACA;;AAEA,CAAC;;AAED,kBAAe;;;;;;;;;;;AClCF;;AAEb,8CAA6C;AAC7C;AACA,CAAC,EAAC;AACF,yBAAyB;AACzB,mBAAmB;;AAEnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;;;;;;;;;;;ACvCa;;AAEb,8CAA6C;AAC7C;AACA,CAAC,EAAC;AACF,kBAAe;;AAEf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kGAAkG;;AAElG;AACA;AACA;AACA,6EAA6E;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,4CAA4C,OAAO;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAI;;;AAGJ;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,MAAM;;;AAGN;;AAEA;AACA;AACA,MAAM;;;AAGN,oCAAoC,kCAAkC;AACtE,IAAI;;;AAGJ;AACA;AACA;;AAEA,wBAAwB,qBAAqB;AAC7C;AACA;AACA;AACA;AACA;;;AAGA;AACA,wBAAwB,qBAAqB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;;AAEA;AACA,qDAAqD;AACrD;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,uDAAuD;AACvD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,8BAA8B,kBAAkB,EAAE,OAAO;AACzD;AACA;AACA;;AAEA;AACA;;;;;;;;;;;ACnNa;;AAEb,8CAA6C;AAC7C;AACA,CAAC,EAAC;AACF,6BAA6B;AAC7B,yBAAyB;;AAEzB,4CAA4C,mBAAO,CAAC,2HAAkB;;AAEtE,eAAe,mBAAO,CAAC,6GAAW;;AAElC,sCAAsC,mBAAO,CAAC,6GAAW;;AAEzD,uCAAuC,uCAAuC;;AAE9E;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,uCAAuC;;AAEvC;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA,IAAI;;;AAGJ;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;;AAGJ;AACA;AACA;AACA;AACA,IAAI;;;AAGJ;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,KAAK;AACxB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,MAAM;AACN;AACA;;AAEA;AACA;AACA;AACA;AACA,2CAA2C;AAC3C;AACA;AACA,UAAU;AACV,iEAAiE,GAAG,EAAE,QAAQ;AAC9E;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;ACzKa;;AAEb,8CAA6C;AAC7C;AACA,CAAC,EAAC;AACF,kBAAe;;AAEf,eAAe,mBAAO,CAAC,sIAAgC;;AAEvD,sCAAsC,mBAAO,CAAC,sHAAwB;;AAEtE,6CAA6C,mBAAO,CAAC,6HAAmB;;AAExE,gBAAgB,mBAAO,CAAC,+GAAY;;AAEpC,uCAAuC,uCAAuC;;AAE9E;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,0CAA0C;AAC1C;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;;;AAGA,8DAA8D;;AAE9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,MAAM;AACN;;;AAGA,wHAAwH;;AAExH;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL,GAAG;AACH;;;;;;;;;;;AC1Ha;;AAEb,8CAA6C;AAC7C;AACA,CAAC,EAAC;AACF,gBAAgB;AAChB,gBAAgB;AAChB,gBAAgB;AAChB,gBAAgB;AAChB,gBAAgB;AAChB,kBAAkB;AAClB,mBAAmB;;AAEnB,oCAAoC,mBAAO,CAAC,iHAAiB;;AAE7D,cAAc,mBAAO,CAAC,yGAAgB;;AAEtC,uCAAuC,uCAAuC;;AAE9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,UAAU;AACrB,WAAW,QAAQ;AACnB,aAAa,UAAU;AACvB;AACA;;;AAGA;AACA;AACA;AACA;AACA,sEAAsE;AACtE;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,4BAA4B;AAC5B;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;AACA;;AAEA;AACA;AACA,wEAAwE,oBAAoB;AAC5F,KAAK;AACL;AACA,IAAI;AACJ;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA,IAAI;AACJ,sBAAsB,EAAE;AACxB;AACA;;;;;;;;;;;AC9Ga;;AAEb,8CAA6C;AAC7C;AACA,CAAC,EAAC;AACF,kBAAe;;AAEf,sCAAsC,mBAAO,CAAC,sHAAwB;;AAEtE,uCAAuC,uCAAuC;;AAE9E;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,yCAAyC;AACzC,yDAAyD,SAAS;AAClE;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,wBAAwB;AACxB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,kBAAe;;;;;;;;;;;AC1DF;;AAEb,8CAA6C;AAC7C;AACA,CAAC,EAAC;AACF,kBAAe;;AAEf,cAAc,mBAAO,CAAC,oGAAW;;AAEjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AClBa;;AAEb,8CAA6C;AAC7C;AACA,CAAC,EAAC;AACF,iDAAgD;AAChD;AACA;AACA;AACA;AACA,CAAC,EAAC;AACF,gDAA+C;AAC/C;AACA;AACA;AACA;AACA,CAAC,EAAC;AACF,+CAA8C;AAC9C;AACA;AACA;AACA;AACA,CAAC,EAAC;AACF,8CAA6C;AAC7C;AACA;AACA;AACA;AACA,CAAC,EAAC;;AAEF,cAAc,mBAAO,CAAC,iHAAoB;;;;;;;;;;;AC9B7B;;AAEb,8CAA6C;AAC7C;AACA,CAAC,EAAC;AACF,wBAAwB;;AAExB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,uEAAuE,IAAI;AAC3E,IAAI;AACJ;AACA;AACA;AACA;AACA;;;AAGA;;AAEA,sEAAsE;AACtE;AACA;;AAEA;AACA;;;;;;;;;;;AChDa;;AAEb,8CAA6C;AAC7C;AACA,CAAC,EAAC;AACF,gBAAgB;;AAEhB,sCAAsC,mBAAO,CAAC,mHAAqB;;AAEnE,gBAAgB,mBAAO,CAAC,6HAA0B;;AAElD,kBAAkB,mBAAO,CAAC,iHAAoB;;AAE9C,mBAAmB,mBAAO,CAAC,oHAAgB;;AAE3C,uCAAuC,uCAAuC;;AAE9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA,oCAAoC;;AAEpC;AACA;AACA;;AAEA;AACA,oEAAoE;AACpE;AACA,sBAAsB;AACtB,UAAU;;AAEV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI;AACJ;AACA,IAAI;;;AAGJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;;AAEA;AACA;;AAEA;AACA;AACA,QAAQ,YAAY;AACpB;AACA,MAAM;;;AAGN;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA;AACA;AACA,OAAO;AACP;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA,6CAA6C;;AAE7C;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;;;AAGA;AACA;AACA,MAAM;AACN;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;ACtNY;;AAEb,gBAAgB,mBAAO,CAAC,6HAA0B;;AAElD,cAAc,mBAAO,CAAC,yGAAgB;;AAEtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,eAAe,SAAS,IAAI,KAAK,EAAE,SAAS;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;ACpDY;;AAEb,mBAAO,CAAC,0GAAgB;;AAExB,mBAAO,CAAC,oHAAqB;;AAE7B,mBAAO,CAAC,0HAAwB;;AAEhC,mBAAO,CAAC,oHAAqB;;AAE7B,mBAAO,CAAC,kHAAoB;;;;;;;;;;;ACVf;;AAEb,8CAA6C;AAC7C;AACA,CAAC,EAAC;AACF,cAAc,GAAG,cAAc;;AAE/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA,cAAc;;;;;;;;;;;ACjBD;;AAEb,8CAA6C;AAC7C;AACA,CAAC,EAAC;AACF,2CAA0C;AAC1C;AACA;AACA;AACA;AACA,CAAC,EAAC;;AAEF,sCAAsC,mBAAO,CAAC,8HAAyC;;;;;;;;;;;ACZ1E;;AAEb,8CAA6C;AAC7C;AACA,CAAC,EAAC;AACF,kBAAe;;AAEf,mDAAmD,mBAAO,CAAC,4FAAuB;;AAElF,uCAAuC,uCAAuC;;AAE9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAe;;;;;;;;;;;ACtBF;;AAEb,8CAA6C;AAC7C;AACA,CAAC,EAAC;AACF,kBAAkB,GAAG,mBAAmB,GAAG,oBAAoB,GAAG,qBAAqB;;AAEvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,kBAAkB;;AAElB;;AAEA,mBAAmB;;AAEnB;;AAEA,oBAAoB;;AAEpB;;AAEA,qBAAqB;;;;;;;;;;;AC5BR;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,mBAAmB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,+DAA+D;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,sBAAsB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,EAAE,QAAQ,UAAU,YAAY,+CAA+C,oBAAoB,GAAG;AACtH;AACA;AACA;AACA,cAAc;AACd,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,wBAAwB,gBAAgB;AAC/F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,kBAAkB;AAClB,wBAAwB;AACxB,8BAA8B;AAC9B,oBAAoB;AACpB;;;;;;;;;;;;ACnRa;;AAEb,YAAY,mBAAO,CAAC,kGAAiB;AACrC,YAAY,mBAAO,CAAC,gGAAgB;AACpC,YAAY,mBAAO,CAAC,kGAAiB;AACrC,eAAe,mBAAO,CAAC,wGAAoB;;;;AAI3C,aAAa;AACb,gBAAgB;AAChB,eAAe;AACf,wBAAwB;AACxB,aAAa;AACb,eAAe;AACf,+BAA+B;AAC/B,sBAAsB;AACtB,uBAAuB;AACvB,gDAA+C;AAC/C;AACA,oBAAoB;AACpB,CAAC,EAAC;AACF,wBAAwB;AACxB;;;;;;;;;;;;ACvBa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,WAAW;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,oBAAoB;AACpB,eAAe;AACf,wBAAwB;AACxB;;;;;;;;;;;;ACtKa;;AAEb,YAAY,mBAAO,CAAC,8FAAa;;AAEjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA,CAAC,2BAA2B,oBAAoB,KAAK;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,OAAO;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,+BAA+B;AAC/B,sBAAsB;AACtB,uBAAuB;AACvB,wBAAwB;AACxB;;;;;;;;;;;;ACzIa;;AAEb,YAAY,mBAAO,CAAC,8FAAa;;AAEjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE,KAAK,IAAI,KAAK;AAChF,4BAA4B,KAAK,IAAI,KAAK;AAC1C,gCAAgC,KAAK,IAAI,KAAK;AAC9C;AACA;AACA,wCAAwC,KAAK,IAAI,KAAK;AACtD,qCAAqC,KAAK,IAAI,KAAK;AACnD,wDAAwD,KAAK,IAAI,KAAK;AACtE;AACA;AACA;AACA;AACA,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,iDAAiD;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,MAAM;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,MAAM;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,MAAM;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,gBAAgB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,iBAAiB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,mBAAmB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,iBAAiB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,oBAAoB;AAC3C,sBAAsB,8BAA8B,EAAE,mCAAmC,EAAE,wCAAwC;AACnI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,cAAc,IAAI;AAChD;AACA;AACA;AACA,wBAAwB,mBAAmB;AAC3C;AACA;AACA;AACA;AACA;AACA,+CAA+C,aAAa;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,aAAa;AACxD;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,oCAAoC,QAAQ;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,QAAQ;AAC5B,6BAA6B,SAAS;AACtC,wBAAwB,SAAS;AACjC;AACA,2BAA2B,gCAAgC,IAAI;AAC/D;AACA;AACA;AACA;AACA,qCAAqC,MAAM;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,6BAA6B;AACnF;AACA,SAAS;AACT;AACA;AACA;;AAEA,gCAAgC;AAChC,oBAAoB;AACpB,oBAAoB;AACpB,iBAAiB;AACjB,aAAa;AACb,eAAe;AACf,gBAAgB;AAChB;;;;;;;;;;;;ACtfa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,aAAa;AACb,eAAe;AACf;;;;;;;;;;;;AClBa;;AAEb,iCAAiC,mBAAO,CAAC,sHAAqC;AAC9E,uBAAuB,mBAAO,CAAC,gGAA0B;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,gBAAgB;AAClE;AACA;AACA;AACA;AACA;AACA,2BAA2B,gBAAgB;AAC3C;AACA;AACA,kCAAkC,gBAAgB;AAClD;AACA;AACA;AACA,2BAA2B,gBAAgB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,gDAAgD,2BAA2B;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,qDAAqD;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,oCAAoC;AAC1E;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,IAAI,2BAA2B;AACpC,kDAAkD,2BAA2B;AAC7E;;AAEA,uBAAuB;AACvB;;;;;;;UCpOA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;;;;;;ACtBa;;AAEb,mBAAO,CAAC,mHAAkB,E","sources":["webpack://ghostery-common/./node_modules/webextension-polyfill/dist/browser-polyfill.js","webpack://ghostery-common/../../../../../tmp/broccoli-2072qHpeb2ETG4g1/out-40-funnel/modules/adblocker/content.js","webpack://ghostery-common/../../../../../tmp/broccoli-2072qHpeb2ETG4g1/out-40-funnel/modules/antitracking/content.js","webpack://ghostery-common/../../../../../tmp/broccoli-2072qHpeb2ETG4g1/out-40-funnel/modules/core/config.js","webpack://ghostery-common/../../../../../tmp/broccoli-2072qHpeb2ETG4g1/out-40-funnel/modules/core/content-script.js","webpack://ghostery-common/../../../../../tmp/broccoli-2072qHpeb2ETG4g1/out-40-funnel/modules/core/content.js","webpack://ghostery-common/../../../../../tmp/broccoli-2072qHpeb2ETG4g1/out-40-funnel/modules/core/content/actions-manager.js","webpack://ghostery-common/../../../../../tmp/broccoli-2072qHpeb2ETG4g1/out-40-funnel/modules/core/content/console.js","webpack://ghostery-common/../../../../../tmp/broccoli-2072qHpeb2ETG4g1/out-40-funnel/modules/core/content/helpers.js","webpack://ghostery-common/../../../../../tmp/broccoli-2072qHpeb2ETG4g1/out-40-funnel/modules/core/content/match-patterns.js","webpack://ghostery-common/../../../../../tmp/broccoli-2072qHpeb2ETG4g1/out-40-funnel/modules/core/content/register.js","webpack://ghostery-common/../../../../../tmp/broccoli-2072qHpeb2ETG4g1/out-40-funnel/modules/core/content/run.js","webpack://ghostery-common/../../../../../tmp/broccoli-2072qHpeb2ETG4g1/out-40-funnel/modules/core/decorators.js","webpack://ghostery-common/../../../../../tmp/broccoli-2072qHpeb2ETG4g1/out-40-funnel/modules/core/helpers/remote-action-provider.js","webpack://ghostery-common/../../../../../tmp/broccoli-2072qHpeb2ETG4g1/out-40-funnel/modules/core/helpers/sleep.js","webpack://ghostery-common/../../../../../tmp/broccoli-2072qHpeb2ETG4g1/out-40-funnel/modules/core/timers.js","webpack://ghostery-common/../../../../../tmp/broccoli-2072qHpeb2ETG4g1/out-40-funnel/modules/human-web/ad-detection.js","webpack://ghostery-common/../../../../../tmp/broccoli-2072qHpeb2ETG4g1/out-40-funnel/modules/human-web/content.js","webpack://ghostery-common/../../../../../tmp/broccoli-2072qHpeb2ETG4g1/out-40-funnel/modules/insights/content.js","webpack://ghostery-common/../../../../../tmp/broccoli-2072qHpeb2ETG4g1/out-40-funnel/modules/module-content-script.js","webpack://ghostery-common/../../../../../tmp/broccoli-2072qHpeb2ETG4g1/out-40-funnel/modules/platform/content/globals.js","webpack://ghostery-common/../../../../../tmp/broccoli-2072qHpeb2ETG4g1/out-40-funnel/modules/platform/lib/adblocker-cosmetics.js","webpack://ghostery-common/../../../../../tmp/broccoli-2072qHpeb2ETG4g1/out-40-funnel/modules/platform/runtime.js","webpack://ghostery-common/../../../../../tmp/broccoli-2072qHpeb2ETG4g1/out-40-funnel/modules/platform/timers.js","webpack://ghostery-common/./node_modules/@cliqz/adblocker-content/dist/cjs/adblocker.cjs","webpack://ghostery-common/./node_modules/@cliqz/adblocker-extended-selectors/dist/cjs/adblocker.cjs","webpack://ghostery-common/./node_modules/@cliqz/adblocker-extended-selectors/dist/cjs/src/eval.cjs","webpack://ghostery-common/./node_modules/@cliqz/adblocker-extended-selectors/dist/cjs/src/extended.cjs","webpack://ghostery-common/./node_modules/@cliqz/adblocker-extended-selectors/dist/cjs/src/parse.cjs","webpack://ghostery-common/./node_modules/@cliqz/adblocker-extended-selectors/dist/cjs/src/types.cjs","webpack://ghostery-common/./node_modules/@cliqz/adblocker-webextension-cosmetics/dist/cjs/adblocker.cjs","webpack://ghostery-common/webpack/bootstrap","webpack://ghostery-common/../../../../../tmp/broccoli-2072qHpeb2ETG4g1/out-40-funnel/modules/core/content-script.bundle.js"],"sourcesContent":["(function (global, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define(\"webextension-polyfill\", [\"module\"], factory);\n  } else if (typeof exports !== \"undefined\") {\n    factory(module);\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod);\n    global.browser = mod.exports;\n  }\n})(typeof globalThis !== \"undefined\" ? globalThis : typeof self !== \"undefined\" ? self : this, function (module) {\n  /* webextension-polyfill - v0.7.0 - Tue Nov 10 2020 20:24:04 */\n\n  /* -*- Mode: indent-tabs-mode: nil; js-indent-level: 2 -*- */\n\n  /* vim: set sts=2 sw=2 et tw=80: */\n\n  /* This Source Code Form is subject to the terms of the Mozilla Public\n   * License, v. 2.0. If a copy of the MPL was not distributed with this\n   * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n  \"use strict\";\n\n  if (typeof browser === \"undefined\" || Object.getPrototypeOf(browser) !== Object.prototype) {\n    const CHROME_SEND_MESSAGE_CALLBACK_NO_RESPONSE_MESSAGE = \"The message port closed before a response was received.\";\n    const SEND_RESPONSE_DEPRECATION_WARNING = \"Returning a Promise is the preferred way to send a reply from an onMessage/onMessageExternal listener, as the sendResponse will be removed from the specs (See https://developer.mozilla.org/docs/Mozilla/Add-ons/WebExtensions/API/runtime/onMessage)\"; // Wrapping the bulk of this polyfill in a one-time-use function is a minor\n    // optimization for Firefox. Since Spidermonkey does not fully parse the\n    // contents of a function until the first time it's called, and since it will\n    // never actually need to be called, this allows the polyfill to be included\n    // in Firefox nearly for free.\n\n    const wrapAPIs = extensionAPIs => {\n      // NOTE: apiMetadata is associated to the content of the api-metadata.json file\n      // at build time by replacing the following \"include\" with the content of the\n      // JSON file.\n      const apiMetadata = {\n        \"alarms\": {\n          \"clear\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"clearAll\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"get\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"getAll\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          }\n        },\n        \"bookmarks\": {\n          \"create\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"get\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"getChildren\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"getRecent\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"getSubTree\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"getTree\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"move\": {\n            \"minArgs\": 2,\n            \"maxArgs\": 2\n          },\n          \"remove\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"removeTree\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"search\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"update\": {\n            \"minArgs\": 2,\n            \"maxArgs\": 2\n          }\n        },\n        \"browserAction\": {\n          \"disable\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1,\n            \"fallbackToNoCallback\": true\n          },\n          \"enable\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1,\n            \"fallbackToNoCallback\": true\n          },\n          \"getBadgeBackgroundColor\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"getBadgeText\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"getPopup\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"getTitle\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"openPopup\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"setBadgeBackgroundColor\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1,\n            \"fallbackToNoCallback\": true\n          },\n          \"setBadgeText\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1,\n            \"fallbackToNoCallback\": true\n          },\n          \"setIcon\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"setPopup\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1,\n            \"fallbackToNoCallback\": true\n          },\n          \"setTitle\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1,\n            \"fallbackToNoCallback\": true\n          }\n        },\n        \"browsingData\": {\n          \"remove\": {\n            \"minArgs\": 2,\n            \"maxArgs\": 2\n          },\n          \"removeCache\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"removeCookies\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"removeDownloads\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"removeFormData\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"removeHistory\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"removeLocalStorage\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"removePasswords\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"removePluginData\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"settings\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          }\n        },\n        \"commands\": {\n          \"getAll\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          }\n        },\n        \"contextMenus\": {\n          \"remove\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"removeAll\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"update\": {\n            \"minArgs\": 2,\n            \"maxArgs\": 2\n          }\n        },\n        \"cookies\": {\n          \"get\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"getAll\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"getAllCookieStores\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"remove\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"set\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          }\n        },\n        \"devtools\": {\n          \"inspectedWindow\": {\n            \"eval\": {\n              \"minArgs\": 1,\n              \"maxArgs\": 2,\n              \"singleCallbackArg\": false\n            }\n          },\n          \"panels\": {\n            \"create\": {\n              \"minArgs\": 3,\n              \"maxArgs\": 3,\n              \"singleCallbackArg\": true\n            },\n            \"elements\": {\n              \"createSidebarPane\": {\n                \"minArgs\": 1,\n                \"maxArgs\": 1\n              }\n            }\n          }\n        },\n        \"downloads\": {\n          \"cancel\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"download\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"erase\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"getFileIcon\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 2\n          },\n          \"open\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1,\n            \"fallbackToNoCallback\": true\n          },\n          \"pause\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"removeFile\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"resume\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"search\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"show\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1,\n            \"fallbackToNoCallback\": true\n          }\n        },\n        \"extension\": {\n          \"isAllowedFileSchemeAccess\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"isAllowedIncognitoAccess\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          }\n        },\n        \"history\": {\n          \"addUrl\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"deleteAll\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"deleteRange\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"deleteUrl\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"getVisits\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"search\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          }\n        },\n        \"i18n\": {\n          \"detectLanguage\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"getAcceptLanguages\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          }\n        },\n        \"identity\": {\n          \"launchWebAuthFlow\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          }\n        },\n        \"idle\": {\n          \"queryState\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          }\n        },\n        \"management\": {\n          \"get\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"getAll\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"getSelf\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"setEnabled\": {\n            \"minArgs\": 2,\n            \"maxArgs\": 2\n          },\n          \"uninstallSelf\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          }\n        },\n        \"notifications\": {\n          \"clear\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"create\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 2\n          },\n          \"getAll\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"getPermissionLevel\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"update\": {\n            \"minArgs\": 2,\n            \"maxArgs\": 2\n          }\n        },\n        \"pageAction\": {\n          \"getPopup\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"getTitle\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"hide\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1,\n            \"fallbackToNoCallback\": true\n          },\n          \"setIcon\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"setPopup\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1,\n            \"fallbackToNoCallback\": true\n          },\n          \"setTitle\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1,\n            \"fallbackToNoCallback\": true\n          },\n          \"show\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1,\n            \"fallbackToNoCallback\": true\n          }\n        },\n        \"permissions\": {\n          \"contains\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"getAll\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"remove\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"request\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          }\n        },\n        \"runtime\": {\n          \"getBackgroundPage\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"getPlatformInfo\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"openOptionsPage\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"requestUpdateCheck\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"sendMessage\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 3\n          },\n          \"sendNativeMessage\": {\n            \"minArgs\": 2,\n            \"maxArgs\": 2\n          },\n          \"setUninstallURL\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          }\n        },\n        \"sessions\": {\n          \"getDevices\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"getRecentlyClosed\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"restore\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          }\n        },\n        \"storage\": {\n          \"local\": {\n            \"clear\": {\n              \"minArgs\": 0,\n              \"maxArgs\": 0\n            },\n            \"get\": {\n              \"minArgs\": 0,\n              \"maxArgs\": 1\n            },\n            \"getBytesInUse\": {\n              \"minArgs\": 0,\n              \"maxArgs\": 1\n            },\n            \"remove\": {\n              \"minArgs\": 1,\n              \"maxArgs\": 1\n            },\n            \"set\": {\n              \"minArgs\": 1,\n              \"maxArgs\": 1\n            }\n          },\n          \"managed\": {\n            \"get\": {\n              \"minArgs\": 0,\n              \"maxArgs\": 1\n            },\n            \"getBytesInUse\": {\n              \"minArgs\": 0,\n              \"maxArgs\": 1\n            }\n          },\n          \"sync\": {\n            \"clear\": {\n              \"minArgs\": 0,\n              \"maxArgs\": 0\n            },\n            \"get\": {\n              \"minArgs\": 0,\n              \"maxArgs\": 1\n            },\n            \"getBytesInUse\": {\n              \"minArgs\": 0,\n              \"maxArgs\": 1\n            },\n            \"remove\": {\n              \"minArgs\": 1,\n              \"maxArgs\": 1\n            },\n            \"set\": {\n              \"minArgs\": 1,\n              \"maxArgs\": 1\n            }\n          }\n        },\n        \"tabs\": {\n          \"captureVisibleTab\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 2\n          },\n          \"create\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"detectLanguage\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"discard\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"duplicate\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"executeScript\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 2\n          },\n          \"get\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"getCurrent\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"getZoom\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"getZoomSettings\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"goBack\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"goForward\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"highlight\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"insertCSS\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 2\n          },\n          \"move\": {\n            \"minArgs\": 2,\n            \"maxArgs\": 2\n          },\n          \"query\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"reload\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 2\n          },\n          \"remove\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"removeCSS\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 2\n          },\n          \"sendMessage\": {\n            \"minArgs\": 2,\n            \"maxArgs\": 3\n          },\n          \"setZoom\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 2\n          },\n          \"setZoomSettings\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 2\n          },\n          \"update\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 2\n          }\n        },\n        \"topSites\": {\n          \"get\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          }\n        },\n        \"webNavigation\": {\n          \"getAllFrames\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"getFrame\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          }\n        },\n        \"webRequest\": {\n          \"handlerBehaviorChanged\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          }\n        },\n        \"windows\": {\n          \"create\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"get\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 2\n          },\n          \"getAll\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"getCurrent\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"getLastFocused\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"remove\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"update\": {\n            \"minArgs\": 2,\n            \"maxArgs\": 2\n          }\n        }\n      };\n\n      if (Object.keys(apiMetadata).length === 0) {\n        throw new Error(\"api-metadata.json has not been included in browser-polyfill\");\n      }\n      /**\n       * A WeakMap subclass which creates and stores a value for any key which does\n       * not exist when accessed, but behaves exactly as an ordinary WeakMap\n       * otherwise.\n       *\n       * @param {function} createItem\n       *        A function which will be called in order to create the value for any\n       *        key which does not exist, the first time it is accessed. The\n       *        function receives, as its only argument, the key being created.\n       */\n\n\n      class DefaultWeakMap extends WeakMap {\n        constructor(createItem, items = undefined) {\n          super(items);\n          this.createItem = createItem;\n        }\n\n        get(key) {\n          if (!this.has(key)) {\n            this.set(key, this.createItem(key));\n          }\n\n          return super.get(key);\n        }\n\n      }\n      /**\n       * Returns true if the given object is an object with a `then` method, and can\n       * therefore be assumed to behave as a Promise.\n       *\n       * @param {*} value The value to test.\n       * @returns {boolean} True if the value is thenable.\n       */\n\n\n      const isThenable = value => {\n        return value && typeof value === \"object\" && typeof value.then === \"function\";\n      };\n      /**\n       * Creates and returns a function which, when called, will resolve or reject\n       * the given promise based on how it is called:\n       *\n       * - If, when called, `chrome.runtime.lastError` contains a non-null object,\n       *   the promise is rejected with that value.\n       * - If the function is called with exactly one argument, the promise is\n       *   resolved to that value.\n       * - Otherwise, the promise is resolved to an array containing all of the\n       *   function's arguments.\n       *\n       * @param {object} promise\n       *        An object containing the resolution and rejection functions of a\n       *        promise.\n       * @param {function} promise.resolve\n       *        The promise's resolution function.\n       * @param {function} promise.rejection\n       *        The promise's rejection function.\n       * @param {object} metadata\n       *        Metadata about the wrapped method which has created the callback.\n       * @param {integer} metadata.maxResolvedArgs\n       *        The maximum number of arguments which may be passed to the\n       *        callback created by the wrapped async function.\n       *\n       * @returns {function}\n       *        The generated callback function.\n       */\n\n\n      const makeCallback = (promise, metadata) => {\n        return (...callbackArgs) => {\n          if (extensionAPIs.runtime.lastError) {\n            promise.reject(extensionAPIs.runtime.lastError);\n          } else if (metadata.singleCallbackArg || callbackArgs.length <= 1 && metadata.singleCallbackArg !== false) {\n            promise.resolve(callbackArgs[0]);\n          } else {\n            promise.resolve(callbackArgs);\n          }\n        };\n      };\n\n      const pluralizeArguments = numArgs => numArgs == 1 ? \"argument\" : \"arguments\";\n      /**\n       * Creates a wrapper function for a method with the given name and metadata.\n       *\n       * @param {string} name\n       *        The name of the method which is being wrapped.\n       * @param {object} metadata\n       *        Metadata about the method being wrapped.\n       * @param {integer} metadata.minArgs\n       *        The minimum number of arguments which must be passed to the\n       *        function. If called with fewer than this number of arguments, the\n       *        wrapper will raise an exception.\n       * @param {integer} metadata.maxArgs\n       *        The maximum number of arguments which may be passed to the\n       *        function. If called with more than this number of arguments, the\n       *        wrapper will raise an exception.\n       * @param {integer} metadata.maxResolvedArgs\n       *        The maximum number of arguments which may be passed to the\n       *        callback created by the wrapped async function.\n       *\n       * @returns {function(object, ...*)}\n       *       The generated wrapper function.\n       */\n\n\n      const wrapAsyncFunction = (name, metadata) => {\n        return function asyncFunctionWrapper(target, ...args) {\n          if (args.length < metadata.minArgs) {\n            throw new Error(`Expected at least ${metadata.minArgs} ${pluralizeArguments(metadata.minArgs)} for ${name}(), got ${args.length}`);\n          }\n\n          if (args.length > metadata.maxArgs) {\n            throw new Error(`Expected at most ${metadata.maxArgs} ${pluralizeArguments(metadata.maxArgs)} for ${name}(), got ${args.length}`);\n          }\n\n          return new Promise((resolve, reject) => {\n            if (metadata.fallbackToNoCallback) {\n              // This API method has currently no callback on Chrome, but it return a promise on Firefox,\n              // and so the polyfill will try to call it with a callback first, and it will fallback\n              // to not passing the callback if the first call fails.\n              try {\n                target[name](...args, makeCallback({\n                  resolve,\n                  reject\n                }, metadata));\n              } catch (cbError) {\n                console.warn(`${name} API method doesn't seem to support the callback parameter, ` + \"falling back to call it without a callback: \", cbError);\n                target[name](...args); // Update the API method metadata, so that the next API calls will not try to\n                // use the unsupported callback anymore.\n\n                metadata.fallbackToNoCallback = false;\n                metadata.noCallback = true;\n                resolve();\n              }\n            } else if (metadata.noCallback) {\n              target[name](...args);\n              resolve();\n            } else {\n              target[name](...args, makeCallback({\n                resolve,\n                reject\n              }, metadata));\n            }\n          });\n        };\n      };\n      /**\n       * Wraps an existing method of the target object, so that calls to it are\n       * intercepted by the given wrapper function. The wrapper function receives,\n       * as its first argument, the original `target` object, followed by each of\n       * the arguments passed to the original method.\n       *\n       * @param {object} target\n       *        The original target object that the wrapped method belongs to.\n       * @param {function} method\n       *        The method being wrapped. This is used as the target of the Proxy\n       *        object which is created to wrap the method.\n       * @param {function} wrapper\n       *        The wrapper function which is called in place of a direct invocation\n       *        of the wrapped method.\n       *\n       * @returns {Proxy<function>}\n       *        A Proxy object for the given method, which invokes the given wrapper\n       *        method in its place.\n       */\n\n\n      const wrapMethod = (target, method, wrapper) => {\n        return new Proxy(method, {\n          apply(targetMethod, thisObj, args) {\n            return wrapper.call(thisObj, target, ...args);\n          }\n\n        });\n      };\n\n      let hasOwnProperty = Function.call.bind(Object.prototype.hasOwnProperty);\n      /**\n       * Wraps an object in a Proxy which intercepts and wraps certain methods\n       * based on the given `wrappers` and `metadata` objects.\n       *\n       * @param {object} target\n       *        The target object to wrap.\n       *\n       * @param {object} [wrappers = {}]\n       *        An object tree containing wrapper functions for special cases. Any\n       *        function present in this object tree is called in place of the\n       *        method in the same location in the `target` object tree. These\n       *        wrapper methods are invoked as described in {@see wrapMethod}.\n       *\n       * @param {object} [metadata = {}]\n       *        An object tree containing metadata used to automatically generate\n       *        Promise-based wrapper functions for asynchronous. Any function in\n       *        the `target` object tree which has a corresponding metadata object\n       *        in the same location in the `metadata` tree is replaced with an\n       *        automatically-generated wrapper function, as described in\n       *        {@see wrapAsyncFunction}\n       *\n       * @returns {Proxy<object>}\n       */\n\n      const wrapObject = (target, wrappers = {}, metadata = {}) => {\n        let cache = Object.create(null);\n        let handlers = {\n          has(proxyTarget, prop) {\n            return prop in target || prop in cache;\n          },\n\n          get(proxyTarget, prop, receiver) {\n            if (prop in cache) {\n              return cache[prop];\n            }\n\n            if (!(prop in target)) {\n              return undefined;\n            }\n\n            let value = target[prop];\n\n            if (typeof value === \"function\") {\n              // This is a method on the underlying object. Check if we need to do\n              // any wrapping.\n              if (typeof wrappers[prop] === \"function\") {\n                // We have a special-case wrapper for this method.\n                value = wrapMethod(target, target[prop], wrappers[prop]);\n              } else if (hasOwnProperty(metadata, prop)) {\n                // This is an async method that we have metadata for. Create a\n                // Promise wrapper for it.\n                let wrapper = wrapAsyncFunction(prop, metadata[prop]);\n                value = wrapMethod(target, target[prop], wrapper);\n              } else {\n                // This is a method that we don't know or care about. Return the\n                // original method, bound to the underlying object.\n                value = value.bind(target);\n              }\n            } else if (typeof value === \"object\" && value !== null && (hasOwnProperty(wrappers, prop) || hasOwnProperty(metadata, prop))) {\n              // This is an object that we need to do some wrapping for the children\n              // of. Create a sub-object wrapper for it with the appropriate child\n              // metadata.\n              value = wrapObject(value, wrappers[prop], metadata[prop]);\n            } else if (hasOwnProperty(metadata, \"*\")) {\n              // Wrap all properties in * namespace.\n              value = wrapObject(value, wrappers[prop], metadata[\"*\"]);\n            } else {\n              // We don't need to do any wrapping for this property,\n              // so just forward all access to the underlying object.\n              Object.defineProperty(cache, prop, {\n                configurable: true,\n                enumerable: true,\n\n                get() {\n                  return target[prop];\n                },\n\n                set(value) {\n                  target[prop] = value;\n                }\n\n              });\n              return value;\n            }\n\n            cache[prop] = value;\n            return value;\n          },\n\n          set(proxyTarget, prop, value, receiver) {\n            if (prop in cache) {\n              cache[prop] = value;\n            } else {\n              target[prop] = value;\n            }\n\n            return true;\n          },\n\n          defineProperty(proxyTarget, prop, desc) {\n            return Reflect.defineProperty(cache, prop, desc);\n          },\n\n          deleteProperty(proxyTarget, prop) {\n            return Reflect.deleteProperty(cache, prop);\n          }\n\n        }; // Per contract of the Proxy API, the \"get\" proxy handler must return the\n        // original value of the target if that value is declared read-only and\n        // non-configurable. For this reason, we create an object with the\n        // prototype set to `target` instead of using `target` directly.\n        // Otherwise we cannot return a custom object for APIs that\n        // are declared read-only and non-configurable, such as `chrome.devtools`.\n        //\n        // The proxy handlers themselves will still use the original `target`\n        // instead of the `proxyTarget`, so that the methods and properties are\n        // dereferenced via the original targets.\n\n        let proxyTarget = Object.create(target);\n        return new Proxy(proxyTarget, handlers);\n      };\n      /**\n       * Creates a set of wrapper functions for an event object, which handles\n       * wrapping of listener functions that those messages are passed.\n       *\n       * A single wrapper is created for each listener function, and stored in a\n       * map. Subsequent calls to `addListener`, `hasListener`, or `removeListener`\n       * retrieve the original wrapper, so that  attempts to remove a\n       * previously-added listener work as expected.\n       *\n       * @param {DefaultWeakMap<function, function>} wrapperMap\n       *        A DefaultWeakMap object which will create the appropriate wrapper\n       *        for a given listener function when one does not exist, and retrieve\n       *        an existing one when it does.\n       *\n       * @returns {object}\n       */\n\n\n      const wrapEvent = wrapperMap => ({\n        addListener(target, listener, ...args) {\n          target.addListener(wrapperMap.get(listener), ...args);\n        },\n\n        hasListener(target, listener) {\n          return target.hasListener(wrapperMap.get(listener));\n        },\n\n        removeListener(target, listener) {\n          target.removeListener(wrapperMap.get(listener));\n        }\n\n      }); // Keep track if the deprecation warning has been logged at least once.\n\n\n      let loggedSendResponseDeprecationWarning = false;\n      const onMessageWrappers = new DefaultWeakMap(listener => {\n        if (typeof listener !== \"function\") {\n          return listener;\n        }\n        /**\n         * Wraps a message listener function so that it may send responses based on\n         * its return value, rather than by returning a sentinel value and calling a\n         * callback. If the listener function returns a Promise, the response is\n         * sent when the promise either resolves or rejects.\n         *\n         * @param {*} message\n         *        The message sent by the other end of the channel.\n         * @param {object} sender\n         *        Details about the sender of the message.\n         * @param {function(*)} sendResponse\n         *        A callback which, when called with an arbitrary argument, sends\n         *        that value as a response.\n         * @returns {boolean}\n         *        True if the wrapped listener returned a Promise, which will later\n         *        yield a response. False otherwise.\n         */\n\n\n        return function onMessage(message, sender, sendResponse) {\n          let didCallSendResponse = false;\n          let wrappedSendResponse;\n          let sendResponsePromise = new Promise(resolve => {\n            wrappedSendResponse = function (response) {\n              if (!loggedSendResponseDeprecationWarning) {\n                console.warn(SEND_RESPONSE_DEPRECATION_WARNING, new Error().stack);\n                loggedSendResponseDeprecationWarning = true;\n              }\n\n              didCallSendResponse = true;\n              resolve(response);\n            };\n          });\n          let result;\n\n          try {\n            result = listener(message, sender, wrappedSendResponse);\n          } catch (err) {\n            result = Promise.reject(err);\n          }\n\n          const isResultThenable = result !== true && isThenable(result); // If the listener didn't returned true or a Promise, or called\n          // wrappedSendResponse synchronously, we can exit earlier\n          // because there will be no response sent from this listener.\n\n          if (result !== true && !isResultThenable && !didCallSendResponse) {\n            return false;\n          } // A small helper to send the message if the promise resolves\n          // and an error if the promise rejects (a wrapped sendMessage has\n          // to translate the message into a resolved promise or a rejected\n          // promise).\n\n\n          const sendPromisedResult = promise => {\n            promise.then(msg => {\n              // send the message value.\n              sendResponse(msg);\n            }, error => {\n              // Send a JSON representation of the error if the rejected value\n              // is an instance of error, or the object itself otherwise.\n              let message;\n\n              if (error && (error instanceof Error || typeof error.message === \"string\")) {\n                message = error.message;\n              } else {\n                message = \"An unexpected error occurred\";\n              }\n\n              sendResponse({\n                __mozWebExtensionPolyfillReject__: true,\n                message\n              });\n            }).catch(err => {\n              // Print an error on the console if unable to send the response.\n              console.error(\"Failed to send onMessage rejected reply\", err);\n            });\n          }; // If the listener returned a Promise, send the resolved value as a\n          // result, otherwise wait the promise related to the wrappedSendResponse\n          // callback to resolve and send it as a response.\n\n\n          if (isResultThenable) {\n            sendPromisedResult(result);\n          } else {\n            sendPromisedResult(sendResponsePromise);\n          } // Let Chrome know that the listener is replying.\n\n\n          return true;\n        };\n      });\n\n      const wrappedSendMessageCallback = ({\n        reject,\n        resolve\n      }, reply) => {\n        if (extensionAPIs.runtime.lastError) {\n          // Detect when none of the listeners replied to the sendMessage call and resolve\n          // the promise to undefined as in Firefox.\n          // See https://github.com/mozilla/webextension-polyfill/issues/130\n          if (extensionAPIs.runtime.lastError.message === CHROME_SEND_MESSAGE_CALLBACK_NO_RESPONSE_MESSAGE) {\n            resolve();\n          } else {\n            reject(extensionAPIs.runtime.lastError);\n          }\n        } else if (reply && reply.__mozWebExtensionPolyfillReject__) {\n          // Convert back the JSON representation of the error into\n          // an Error instance.\n          reject(new Error(reply.message));\n        } else {\n          resolve(reply);\n        }\n      };\n\n      const wrappedSendMessage = (name, metadata, apiNamespaceObj, ...args) => {\n        if (args.length < metadata.minArgs) {\n          throw new Error(`Expected at least ${metadata.minArgs} ${pluralizeArguments(metadata.minArgs)} for ${name}(), got ${args.length}`);\n        }\n\n        if (args.length > metadata.maxArgs) {\n          throw new Error(`Expected at most ${metadata.maxArgs} ${pluralizeArguments(metadata.maxArgs)} for ${name}(), got ${args.length}`);\n        }\n\n        return new Promise((resolve, reject) => {\n          const wrappedCb = wrappedSendMessageCallback.bind(null, {\n            resolve,\n            reject\n          });\n          args.push(wrappedCb);\n          apiNamespaceObj.sendMessage(...args);\n        });\n      };\n\n      const staticWrappers = {\n        runtime: {\n          onMessage: wrapEvent(onMessageWrappers),\n          onMessageExternal: wrapEvent(onMessageWrappers),\n          sendMessage: wrappedSendMessage.bind(null, \"sendMessage\", {\n            minArgs: 1,\n            maxArgs: 3\n          })\n        },\n        tabs: {\n          sendMessage: wrappedSendMessage.bind(null, \"sendMessage\", {\n            minArgs: 2,\n            maxArgs: 3\n          })\n        }\n      };\n      const settingMetadata = {\n        clear: {\n          minArgs: 1,\n          maxArgs: 1\n        },\n        get: {\n          minArgs: 1,\n          maxArgs: 1\n        },\n        set: {\n          minArgs: 1,\n          maxArgs: 1\n        }\n      };\n      apiMetadata.privacy = {\n        network: {\n          \"*\": settingMetadata\n        },\n        services: {\n          \"*\": settingMetadata\n        },\n        websites: {\n          \"*\": settingMetadata\n        }\n      };\n      return wrapObject(extensionAPIs, staticWrappers, apiMetadata);\n    };\n\n    if (typeof chrome != \"object\" || !chrome || !chrome.runtime || !chrome.runtime.id) {\n      throw new Error(\"This script should only be loaded in a browser extension.\");\n    } // The build process adds a UMD wrapper around this file, which makes the\n    // `module` variable available.\n\n\n    module.exports = wrapAPIs(chrome);\n  } else {\n    module.exports = browser;\n  }\n});\n//# sourceMappingURL=browser-polyfill.js.map\n","\"use strict\";\n\nvar _adblockerCosmetics = _interopRequireDefault(require(\"../platform/lib/adblocker-cosmetics\"));\n\nvar _register = require(\"../core/content/register\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/*!\n * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n(0, _register.registerContentScript)({\n  module: 'adblocker',\n  matches: ['http://*/*', 'https://*/*'],\n  matchAboutBlank: true,\n  allFrames: true,\n  js: [(window, chrome, CLIQZ) => {\n    /**\n     * This function will immediatly query the background for cosmetics (scripts,\n     * CSS) to inject in the page using its third argument function; then proceed\n     * to the injection. It will also monitor the DOM using a MutationObserver to\n     * know which cosmetics/scriptlets to inject.\n     */\n    (0, _adblockerCosmetics.default)(window, true,\n    /* enable mutation observer */\n    async payload => {\n      const result = await CLIQZ.app.modules.adblocker.action('getCosmeticsFilters', payload);\n      return result || {};\n    });\n  }]\n});","/*!\n * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\"use strict\";","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _default = {\n  \"platform\": \"webextension\",\n  \"brocfile\": \"Brocfile.ghostery.js\",\n  \"baseURL\": \"/cliqz/\",\n  \"pack\": \"npm pack\",\n  \"publish\": \"echo \\\"Uploading version: browser-core-$PACKAGE_VERSION.tgz\\\" && aws s3 cp browser-core-$PACKAGE_VERSION.tgz s3://cdncliqz/update/edge/ghostery/$BRANCH_NAME/$VERSION.${GIT_COMMIT:0:7}.tgz --acl public-read && aws s3 cp s3://cdncliqz/update/edge/ghostery/$BRANCH_NAME/$VERSION.${GIT_COMMIT:0:7}.tgz s3://cdncliqz/update/edge/ghostery/$BRANCH/latest.tgz --acl public-read\",\n  \"sourceMaps\": false,\n  \"format\": \"common\",\n  \"settings\": {\n    \"BACKGROUND_IMAGE_URL\": \"https://cdn.ghostery.net/brands-database/database/\",\n    \"CDN_BASEURL\": \"https://cdn.ghostery.net\",\n    \"ADBLOCKER_BASE_URL\": \"https://cdn.ghostery.com/adblocker/configs\",\n    \"ANTITRACKING_BASE_URL\": \"https://cdn.ghostery.com/antitracking\",\n    \"CONFIG_PROVIDER\": \"https://api.ghostery.net/api/v1/config\",\n    \"ENDPOINT_ANONPATTERNSURL\": \"https://cdn2.ghostery.com/human-web-chromium/patterns-anon.gz\",\n    \"ENDPOINT_HPNV2_DIRECT\": \"https://collector-hpn.ghostery.net\",\n    \"ENDPOINT_HPNV2_ANONYMOUS\": \"https://collector-hpn.ghostery.net\",\n    \"ENDPOINT_HUMAN_WEB_PATTERNS\": \"https://cdn2.ghostery.com/human-web-chromium/hw-patterns.gz\",\n    \"ENDPOINT_PATTERNSURL\": \"https://cdn2.ghostery.com/human-web-chromium/patterns.gz\",\n    \"ENDPOINT_SAFE_QUORUM_ENDPOINT\": \"https://safe-browsing-quorum.privacy.ghostery.net/\",\n    \"ENDPOINT_SAFE_QUORUM_PROVIDER\": \"https://safe-browsing-quorum.privacy.ghostery.net/config\",\n    \"FEEDBACK\": \"https://ghostery.net/feedback/\",\n    \"PRIVACY_SCORE_URL\": \"https://anti-tracking.ghostery.net/api/v1/score?\",\n    \"TRACKER_SCORE_URL\": \"https://cdn.ghostery.net/privacy-score/privacy_score.json\",\n    \"RESULTS_PROVIDER\": \"https://api.ghostery.net/api/v2/results?nrh=1&q=\",\n    \"RESULTS_PROVIDER_LOG\": \"https://api.ghostery.net/api/v1/logging?q=\",\n    \"RICH_HEADER\": \"https://api.ghostery.net/api/v2/rich-header?path=/v2/map\",\n    \"ROTATED_TOP_NEWS\": \"rotated-top-news.ghostery.net\",\n    \"SAFE_BROWSING\": \"https://safe-browsing.ghostery.net\",\n    \"STATISTICS\": \"https://stats.ghostery.net\",\n    \"SUGGESTIONS_URL\": \"https://ghostery.net/search?q=\",\n    \"UNINSTALL\": \"https://ghostery.net/home/offboarding\",\n    \"WTM_API\": \"https://whotracks.me/data/\",\n    \"SUPPORT_URL\": \"https://www.ghostery.com/support/\",\n    \"PRIVACY_POLICY_URL\": \"https://www.ghostery.com/about-ghostery/privacy-statements/\",\n    \"NEW_TAB_URL\": \"/freshtab/home.html\",\n    \"channel\": \"CH80\",\n    \"MSGCHANNEL\": \"web-extension\",\n    \"URL_CHANGED_EVENT_DEBOUNCE\": 500,\n    \"ATTRACK_TELEMETRY_PROVIDER\": \"hpnv2\",\n    \"HW_CHANNEL\": \"ghostery\",\n    \"ALLOWED_COUNTRY_CODES\": [\"ar\", \"at\", \"au\", \"be\", \"br\", \"ca\", \"ch\", \"cn\", \"cz\", \"de\", \"dk\", \"es\", \"fi\", \"fr\", \"gb\", \"gr\", \"hu\", \"id\", \"in\", \"it\", \"jp\", \"kr\", \"mx\", \"nl\", \"no\", \"nz\", \"ph\", \"pl\", \"pt\", \"ro\", \"ru\", \"se\", \"sg\", \"tr\", \"tw\", \"ua\", \"us\"],\n    \"antitrackingPlaceholder\": \"ghostery\",\n    \"antitrackingHeader\": \"Ghostery-AntiTracking\",\n    \"HUMAN_WEB_LITE_COLLECTOR_VIA_PROXY\": \"https://collector-hpn.ghostery.net\",\n    \"HUMAN_WEB_LITE_COLLECTOR_DIRECT\": \"https://collector-hpn.ghostery.net\",\n    \"HUMAN_WEB_LITE_PATTERNS\": \"https://cdn2.ghostery.com/human-web-android/patterns.json\",\n    \"HUMAN_WEB_LITE_AUTO_TRIGGER\": true,\n    \"frameScriptWhitelist\": [\"http://localhost:3000/\"]\n  },\n  \"default_prefs\": {\n    \"modules.human-web.enabled\": true,\n    \"modules.antitracking.enabled\": true,\n    \"modules.adblocker.enabled\": true,\n    \"modules.insights.enabled\": false,\n    \"cliqz-adb\": 1,\n    \"attrackBloomFilter\": true,\n    \"humanWeb\": true,\n    \"attrackTelemetryMode\": 1,\n    \"attrackDefaultAction\": \"placeholder\",\n    \"sendAntiTrackingHeader\": false,\n    \"attrackCookieTrustReferers\": true,\n    \"attrack.cookieMode\": \"ghostery\"\n  },\n  \"bundles\": [\"core/content-script.bundle.js\", \"hpnv2/worker.wasm.bundle.js\", \"hpnv2/worker.asmjs.bundle.js\", \"human-web/rusha.bundle.js\"],\n  \"modules\": [\"core\", \"human-web\", \"hpnv2\", \"antitracking\", \"webrequest-pipeline\", \"adblocker\", \"insights\", \"hpn-lite\", \"human-web-lite\"],\n  \"environment\": \"development\",\n  \"isBeta\": false,\n  \"EXTENSION_VERSION\": \"1.3.16\",\n  \"VERSION\": \"1.3.16\"\n};\nexports.default = _default;","\"use strict\";\n\nrequire(\"../module-content-script\");\n\nvar _run = _interopRequireDefault(require(\"./content/run\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/*!\n * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n/**\n * This file is the entry-point for content scripts for navigation-extension. At\n * build time, it will bundle the code from `content.es` for each module enabled\n * in the config (or nothing if `content.es` does not exist for a given module);\n * and take care of running selectively the scripts for modules which are\n * enabled and whose constraints are satisfied (as defined when registering the\n * content script with `registerContentScript`; typically `matches`,\n * `allFrames`, `matchAboutBlank`, etc.)\n *\n * Here we give an overview of how this mechanism works and how modules can\n * define their own content script(s). Conceptually, each module defining a\n * `content.es` has a chance to create its own content-script. This file\n * contains both the script (i.e.: `js`) to inject, as well as the specification\n * of when to inject it (the API is very similar to Firefox WebExtension API\n * `browser.contentScripts.register` or the `content_scripts` section of the\n * manifest).\n *\n * A module can inject zero, one or multiple content scripts from its\n * `content.es`, using the `registerContentScript` helper function defined in\n * `core/content/register.es`. This function takes one argument. Here is an\n * example:\n *\n *    // File: `modules/adblocker/sources/content.es`\n *    import { registerContentScript } from '../core/content/register';\n *\n *    registerContentScript({\n *      module: 'adblocker', // this should be the name of the module\n *      matches: ['<all_urls>'], // match any URL\n *      allFrames: true, // include iframes\n *      matchAboutBlank: true, // include iframes with `about:blank` as source\n *      js: [(window, chrome, CLIQZ) => {\n *        // Do the thing...\n *      }],\n *    })\n *\n *  The `js` attribute accepts an array of functions to evaluate in a given\n *  frame (here we give only one) and the `registerContentScript` function can\n *  be called multiple times for each module (but typically only once).\n *\n *  Functions injected can optionally return an object containing `actions` for\n *  this specific module's content-script. They can be called from background\n *  using the following core action:\n *\n *    this.core.action(\n *      'callContentAction',\n *      moduleName,\n *      actionName,\n *      { windowId: tabId }, // or { url } to target tabs by URL\n *      ...payloadForActionHandler,\n *    );\n *\n *  When building the extension with `fern.js`, our build-system will collect\n *  all the `content.es` files from enabled modules and bundle them together.\n *  This file is called `content-script.bundle.es`. It is registered in the\n *  manifest for Cliqz extension in `specific/browser/manifest.json`; which\n *  means it will be injected in every page.\n *\n *  This does not mean that the scripts registered by all modules run in every\n *  frame; the `registerContentScript` function only registers a new content\n *  script, but the injection only triggers if the following conditions are met:\n *\n *  1. the module's background needs to be enabled. For example if the adblocker\n *  is turned-off with the pref 'modules.adblocker.enabled' set to `false`, then\n *  even if `content-script.bundle.es` contains the adblocker's content-script,\n *  it will not run (because the module is disabled).\n *\n *  2. conditions specified when calling `registerContentScript` need to be\n *  satisfied. This includes `matches`, `allFrames` or `matchAboutBlank`.\n *\n *  When all conditions are met, then the functions provided in `js` will be\n *  executed in the context of the frame.\n *\n *  For more information about how all of this is implemented, see top-level\n *  comment in `core/content/run.es`.\n */\n// Load content scripts from modules\n(0, _run.default)();","\"use strict\";\n\nvar _helpers = require(\"./content/helpers\");\n\nvar _register = require(\"./content/register\");\n\n/*!\n * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nfunction getContextHTML(ev) {\n  let target = ev.target;\n  let html;\n\n  try {\n    for (let count = 0; count < 5; count += 1) {\n      html = target.innerHTML;\n\n      if (html.indexOf('http://') !== -1 || html.indexOf('https://') !== -1) {\n        return html;\n      }\n\n      target = target.parentNode;\n      count += 1;\n    }\n  } catch (ee) {// Ignore error\n  }\n\n  return undefined;\n}\n\nfunction recordMouseDown(ev, CLIQZ) {\n  const linksSrc = [];\n\n  if (window.parent !== window) {\n    // collect srcipt links only for frames\n    if (window.document && window.document.scripts) {\n      for (let i = 0; i < window.document.scripts.length; i += 1) {\n        const src = window.document.scripts[i].src;\n\n        if (src.startsWith('http')) {\n          linksSrc.push(src);\n        }\n      }\n    }\n  }\n\n  let node = ev.target;\n\n  if (node.nodeType !== 1) {\n    node = node.parentNode;\n  }\n\n  let href = null;\n\n  if (node.closest('a[href]')) {\n    href = node.closest('a[href]').getAttribute('href');\n  }\n\n  const event = {\n    target: {\n      baseURI: ev.target.baseURI,\n      value: ev.target.value,\n      href: ev.target.href,\n      parentNode: {\n        href: ev.target.parentNode ? ev.target.parentNode.href : null\n      },\n      linksSrc\n    }\n  };\n  CLIQZ.app.modules.core.action('recordMouseDown', event, getContextHTML(ev), href);\n}\n\nfunction recordMeta(window, CLIQZ) {\n  // don't analyse language for (i)frames\n  if (!(0, _helpers.isTopWindow)(window)) {\n    return;\n  } // ReportLang\n\n\n  const lang = window.document.getElementsByTagName('html').item(0).getAttribute('lang');\n  const title = window.document.querySelector('title');\n  const description = window.document.querySelector('meta[name=description]');\n  const ogTitle = window.document.querySelector('meta[property=\"og:title\"]');\n  const ogDescription = window.document.querySelector('meta[property=\"og:description\"]');\n  const ogImage = window.document.querySelector('meta[property=\"og:image\"]');\n  CLIQZ.app.modules.core.action('recordMeta', window.location.href, {\n    title: title && title.innerHTML,\n    description: description && description.content,\n    ogTitle: ogTitle && ogTitle.content,\n    ogDescription: ogDescription && ogDescription.content,\n    ogImage: ogImage && ogImage.content,\n    lang\n  });\n}\n\nfunction getHTML() {\n  return window.document.documentElement.outerHTML;\n}\n\nfunction click(selector) {\n  const el = window.document.querySelector(selector);\n\n  try {\n    el.click();\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction queryHTML(selector, attribute, {\n  shadowRootSelector = null,\n  attributeType = 'property'\n} = {}) {\n  const root = shadowRootSelector ? window.document.querySelector(shadowRootSelector).shadowRoot : window.document;\n  const attributes = attribute.split(',');\n\n  const getAttr = (el, attr) => {\n    if (attributeType === 'property') {\n      return el[attr];\n    }\n\n    return el.getAttribute(attr);\n  };\n\n  return Array.prototype.map.call(root.querySelectorAll(selector), el => {\n    if (attributes.length > 1) {\n      return attributes.reduce((hash, attr) => ({ ...hash,\n        [attr]: getAttr(el, attr)\n      }), {});\n    }\n\n    return getAttr(el, attribute);\n  });\n}\n\nfunction queryComputedStyle(selector) {\n  const root = window.document;\n  return Array.prototype.map.call(root.querySelectorAll(selector), el => window.getComputedStyle(el));\n}\n\n(0, _register.registerContentScript)({\n  module: 'core',\n  matches: ['<all_urls>'],\n  allFrames: true,\n  matchAboutBlank: true,\n  js: [(window, chrome, CLIQZ) => {\n    const onMouseDown = ev => {\n      recordMouseDown(ev, CLIQZ);\n    };\n\n    window.addEventListener('mousedown', onMouseDown);\n\n    const onDOMContentLoaded = () => {\n      recordMeta(window, CLIQZ);\n    };\n\n    window.addEventListener('DOMContentLoaded', onDOMContentLoaded); // Stop listening\n\n    window.addEventListener('pagehide', () => {\n      window.removeEventListener('mousedown', onMouseDown);\n      window.removeEventListener('DOMContentLoaded', onDOMContentLoaded);\n    }, {\n      once: true\n    }); // Expose content actions\n\n    return {\n      getHTML,\n      click,\n      queryHTML,\n      queryComputedStyle\n    };\n  }]\n});","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _remoteActionProvider = _interopRequireDefault(require(\"../../core/helpers/remote-action-provider\"));\n\nvar _runtime = _interopRequireDefault(require(\"../../platform/runtime\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/**\n * Buffers messages received through `onMessage` API in memory until content\n * scripts are injected and actions can be triggered. Once actions are\n * available, we first re-play in-memory messages, then start listening to new\n * one.\n */\nclass RemoteMessagesBuffer {\n  // Maximum number of action messages to buffer in memory before content\n  // scripts are injected. This limit should never be reached but is still\n  // necessary to make sure we do not leak memory in case status from App cannot\n  // be received (which should not happen either).\n  constructor() {\n    _defineProperty(this, \"MAX_BUFFER_LEN\", 5000);\n\n    this.buffer = []; // Start buffering until we get `actions` for content scripts\n\n    this.onMessage = message => {\n      if (this.buffer.length < this.MAX_BUFFER_LEN) {\n        return new Promise((resolve, reject) => {\n          this.buffer.push({\n            message,\n            resolve,\n            reject\n          });\n        });\n      }\n\n      return Promise.reject(new Error(`content-script actions buffer limit exceeded: ${this.buffer.length} ${this.MAX_BUFFER_LEN}`));\n    };\n  }\n\n  init() {\n    _runtime.default.onMessage.addListener(this.onMessage);\n  }\n\n  unload() {\n    _runtime.default.onMessage.removeListener(this.onMessage);\n  }\n\n}\n/**\n * Buffers messages in memory until `actions` are specified then switches to\n * using `RemoteActionProvider` for each module to handle remote actions\n * requested by background code.\n */\n\n\nclass ContentScriptActionsManager {\n  constructor() {\n    // Not defined at first\n    this.actions = null; // Start buffering messages in memory until we know about actions. The flow\n    // here is this:\n    //\n    // 1. here (i.e.: `constructor`) we initialize `messageHandlers` as being a\n    // single in-memory queue of messages received from other contexts, before\n    // we know of registered content actions.\n    // 2. in `setActionCallbacks(...)` we receive actions registered by injected\n    // content scripts (see core/sources/content/run.es).\n    // 3. the `unload(...)` method is called to remove the listener, then a new\n    // remote action provider is created for each module having a content script\n    // injected (e.g.: `anti-phishing`, `adblocker`, etc.); also replaying all\n    // messages stored in-memory before that so that nothing is lost even before\n    // we inject content scripts.\n    //\n    // Even though the array only contains one listener at first, we keep\n    // `messageHandlers` as an array so that handling is uniform in the rest of\n    // the code (e.g.: `unload(...)`).\n\n    this.messageHandlers = [new RemoteMessagesBuffer()];\n\n    for (const handler of this.messageHandlers) {\n      handler.init();\n    }\n  }\n  /**\n   * Stop listening to messages\n   */\n\n\n  unload() {\n    for (const handler of this.messageHandlers) {\n      handler.unload();\n    }\n\n    this.messageHandlers = [];\n  }\n  /**\n   * Register action callbacks once content scripts are injected.\n   */\n\n\n  setActionCallbacks(moduleActions) {\n    // Stop current buffering of messages in memory\n    const messages = this.messageHandlers[0].buffer;\n    this.unload(); // Replay messages received so far with actual module actions\n\n    for (const [module, actions] of Object.entries(moduleActions)) {\n      const actionProvider = new _remoteActionProvider.default(module, actions);\n\n      for (const {\n        message,\n        resolve,\n        reject\n      } of messages) {\n        const response = actionProvider.onMessage(message);\n\n        if (response !== undefined) {\n          response.then(resolve).catch(reject);\n        }\n      } // Start listening\n\n\n      actionProvider.init();\n      this.messageHandlers.push(actionProvider);\n    }\n  }\n\n}\n\nexports.default = ContentScriptActionsManager;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _globals = require(\"../../platform/content/globals\");\n\nvar _config = _interopRequireDefault(require(\"../config\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/*!\n * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nfunction noop() {}\n/**\n * In content context we only enable logging in developement build to not\n * pollute logs from visited web pages.\n */\n\n\nvar _default = _config.default.environment === 'development' ? _globals.window.console : new Proxy({}, {\n  get() {\n    return noop;\n  }\n\n});\n\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.documentBodyReady = documentBodyReady;\nexports.isTopWindow = isTopWindow;\n\n/*!\n * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n/**\n * Check if `window` is the top-level window.\n */\nfunction isTopWindow(window) {\n  return window.self === window.top;\n}\n/**\n * Return a `Promise` which resolves once `window.document.body` exists. If it's\n * already the case when the function is invoked, then the promise resolves\n * immediately, otherwise it waits for the `DOMContentLoaded` event to trigger.\n */\n\n\nfunction documentBodyReady() {\n  if (window.document && window.document.body) {\n    return Promise.resolve();\n  }\n\n  return new Promise(resolve => {\n    window.addEventListener('DOMContentLoaded', resolve, {\n      once: true\n    });\n  });\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = match;\n\n/*!\n * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// Implement pattern matching as described in the following document:\n// https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Match_patterns\n// List of all supported schemes:\nconst SUPPORTED_SCHEMES = new Set(['http', 'https', 'ws', 'wss', 'ftp', 'ftps', 'data', 'file']); // Shallow validate a host by checking only allowed characters appear\n\nconst VALID_HOST = /^[.\\w_-]+$/;\n/**\n * Transform an arbitrary string into a RegExp compatible one:\n *  - escape special characters which can be encountered in RegExps (e.g.: '{' or '.')\n *  - replace '*' with '.*' to match anything\n *\n * The result from this function is a string which can be compiled to a RegExp\n * safely. For example: `new RegExp(compileToRegex('foo.bar'))`\n *\n *   > new RegExp(compileToRegex('foo*.[bar]'))\n *   /foo.*\\.\\[bar\\]/\n *\n * '.', '[' and ']' have been escaped and '*' was replaced by '.*' (wildcard).\n */\n\nfunction compileToRegex(str) {\n  return str.replace(/([|.$+?{}()[\\]\\\\])/g, '\\\\$1').replace(/\\*/g, '.*');\n}\n/**\n * Compile the <scheme> part from a match pattern. The matcher is a set of\n * allowed schemes which will be used to check if a given URL's scheme is\n * accepted.\n */\n\n\nfunction createSchemeMatcher(scheme) {\n  if (scheme === '*') {\n    // '*' in <scheme> only matches a subset of all valid protocols (see Mozilla\n    // developer doc at the top for more details).\n    return new Set(['http', 'https', 'ws', 'wss']);\n  }\n\n  if (SUPPORTED_SCHEMES.has(scheme)) {\n    // Only this specific `scheme` will be accepted\n    return new Set([scheme]);\n  }\n\n  throw new Error(`<scheme> is not valid: ${scheme}`);\n}\n/**\n * Compile the <host> part from a match pattern. The matcher is a RegExp object\n * which will be used to check the hostname attribute of a URL. This function\n * can also return `null`, which means that any hostname is accepted. In case of\n * failure, an exception is raised.\n */\n\n\nfunction createHostMatcher(scheme, host) {\n  if (host.includes(':')) {\n    throw new Error('<host> must not include a port number');\n  }\n\n  if (host.length === 0) {\n    // Only 'file:///' can appear without a <host> constraint\n    if (scheme === 'file') {\n      return /^$/;\n    }\n\n    throw new Error('<host> is optional only if the scheme is \"file\"');\n  } // Validate <host> containing a wildcard\n\n\n  const lastWildcardInHost = host.lastIndexOf('*');\n\n  if (lastWildcardInHost !== -1) {\n    //  '*' constraint means we accept anything\n    if (host === '*') {\n      return null;\n    }\n\n    if (lastWildcardInHost !== 0) {\n      throw new Error('<host> wildcard may only appear at the start');\n    }\n\n    if (host[1] !== '.') {\n      throw new Error('<host> only \"*\" and \"*.\" followed by hostname parts are valid');\n    } // At this point we know that `host` is of the form *.<host>\n\n\n    const hostAfterWildcard = host.slice(2);\n\n    if (VALID_HOST.test(hostAfterWildcard) === false) {\n      throw new Error('<host> contains invalid characters');\n    } // Hostname *may* start with labels and *must* be followed by `hostAfterWildcard`\n\n\n    return new RegExp(`^(?:.*[.])?${compileToRegex(hostAfterWildcard)}$`);\n  } // If no wildcard in <host> it should only be a valid hostname\n\n\n  if (VALID_HOST.test(host) === false) {\n    throw new Error('<host> contains invalid characters');\n  }\n\n  return new RegExp(`^${compileToRegex(host)}$`);\n}\n/**\n * Compile the <path> part from a match pattern. The matcher is a RegExp object\n * which will be used against the pathname + search of a URL object.\n */\n\n\nfunction createPathMatcher(path) {\n  return new RegExp(`^${compileToRegex(path)}$`);\n}\n/**\n * Compile a match pattern as specified in https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Match_patterns\n *\n * The return value is an object with three attributes, each matching against\n * one part of the the URL:\n *\n * - `scheme` is a Set of accepted protocols from URL\n * - `host` is a RegExp to test `hostname` from URL (or `null` if no constraint)\n * - `path` is a RegExp to test `pathname` + `search` from URL (or `null`)\n */\n\n\nfunction compile(pattern) {\n  // Special <all_urls> value means that any URL with supported schemes is matched\n  if (pattern === '<all_urls>') {\n    return {\n      scheme: SUPPORTED_SCHEMES,\n      host: null,\n      path: null\n    };\n  } // From this point we parse `pattern` and make sure it is valid. The structure\n  // must be: <scheme>://<host><path>. Each part is also validated. In case an\n  // error is encountered, an exception with explanation is raised.\n  // ======================================================================= //\n  // Extract and validate <scheme> (must be followed by '://')\n\n\n  const indexOfProtocolSeparator = pattern.indexOf('://');\n\n  if (indexOfProtocolSeparator === -1) {\n    throw new Error('<scheme> missing, \"://\" not found');\n  }\n\n  const scheme = pattern.slice(0, indexOfProtocolSeparator);\n  const schemeMatcher = createSchemeMatcher(scheme); // ======================================================================= //\n  // Extract and validate <host> (must be followed by '/')\n\n  const indexOfSlash = pattern.indexOf('/', indexOfProtocolSeparator + 3);\n\n  if (indexOfSlash === -1) {\n    throw new Error('<path> missing, \"/\" not found');\n  }\n\n  const host = pattern.slice(indexOfProtocolSeparator + 3, indexOfSlash);\n  const hostMatcher = createHostMatcher(scheme, host); // ======================================================================= //\n  // Extract and validate <path>\n\n  const path = pattern.slice(indexOfSlash + 1);\n  const pathMatcher = createPathMatcher(path);\n  return {\n    scheme: schemeMatcher,\n    host: hostMatcher,\n    path: pathMatcher\n  };\n}\n/**\n * Check if `url` matches against `pattern` (which *must* be a valid match\n * pattern). See `compile(...)` for more information about patterns.\n */\n\n\nfunction match(pattern, url) {\n  const {\n    protocol,\n    hostname,\n    pathname,\n    search\n  } = new URL(url);\n  const compiled = compile(pattern);\n\n  if (compiled.scheme.has(protocol.slice(0, protocol.length - 1)) === false) {\n    return false;\n  }\n\n  if (compiled.host !== null) {\n    if (compiled.host.test(hostname) === false) {\n      return false;\n    }\n  }\n\n  if (compiled.path !== null) {\n    if (compiled.path.test(`${pathname.slice(1)}${search}`) === false) {\n      return false;\n    }\n  }\n\n  return true;\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.registerContentScript = registerContentScript;\nexports.runContentScripts = runContentScripts;\n\nvar _matchPatterns = _interopRequireDefault(require(\"./match-patterns\"));\n\nvar _helpers = require(\"./helpers\");\n\nvar _console = _interopRequireDefault(require(\"./console\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/*!\n * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n/**\n * Given `spec` which *must* adhere to the specification defined in [1] and a\n * `window` from the current page (either top window or iframe), decides if\n * content script should be loaded. Note that `registerContentScript` will\n * already check that `spec` is valid at registration time so the argument of\n * `shouldLoadScript` can be assumed to be valid.\n *\n * [1] https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/content_scripts,\n */\nfunction shouldLoadScript(window, spec) {\n  // If current frame is not top window, then `allFrames` needs to be true\n  if ((0, _helpers.isTopWindow)(window) === false && spec.allFrames !== true) {\n    return false;\n  }\n\n  let frameUrl = window.location.href; // Handle `matchAboutBlank` option\n\n  if (frameUrl === 'about:blank' || frameUrl === 'about:srcdoc') {\n    if (spec.matchAboutBlank !== true) {\n      return false;\n    } // From: https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/content_scripts\n    // > Insert the content scripts into pages whose URL is \"about:blank\" or\n    // > \"about:srcdoc\", if the URL of the page that opened or created this page\n    // > matches the patterns specified in the rest of the content_scripts key.\n    //\n    // Here we change `frameUrl` to the href of the parent if available so that\n    // other conditions like `matches` can be tested against it to decide if\n    // injection should be performed.\n\n\n    if (!window.parent) {\n      return false;\n    }\n\n    frameUrl = window.parent.location.href;\n  } // If `frameUrl` matches at least one pattern from `excludeMatches` then abort\n\n\n  if (spec.excludeMatches !== undefined) {\n    for (const pattern of spec.excludeMatches) {\n      if ((0, _matchPatterns.default)(pattern, frameUrl)) {\n        return false;\n      }\n    }\n  } // Check if `frameUrl` matches at least one pattern from `matches`\n\n\n  for (const pattern of spec.matches) {\n    if ((0, _matchPatterns.default)(pattern, frameUrl)) {\n      return true;\n    }\n  } // If no valid condition was found then we should not inject\n\n\n  return false;\n}\n/**\n * Globally hold content scripts for all modules\n */\n\n\nconst CONTENT_SCRIPTS = [];\n/**\n * Register a new content-script defined by `spec`. The argument should have the\n * following specification:\n *\n * Examples:\n *  {\n *    module: 'myModule', // name of module\n *    matches: ['<all_urls>'], // mandatory, list of match patterns\n *    excludeMatches: [], // optional\n *    allFrames: true, // optional, default to `false`\n *    matchAboutBlank: true, // optional, default to `false`\n *    js: [() => { ... }], // mandatory, array of functions to inject\n *  }\n */\n\nfunction registerContentScript(spec) {\n  if (spec.module === undefined) {\n    _console.default.error('\"module\" property should be specified in content.es', spec);\n\n    return;\n  }\n\n  if (Array.isArray(spec.js) === false) {\n    _console.default.error('\"js\" should be an array of functions', spec);\n\n    return;\n  }\n\n  if (Array.isArray(spec.matches) === false) {\n    _console.default.error('\"matches\" should be an array of match patterns', spec);\n\n    return;\n  }\n\n  if (spec.excludeMatches !== undefined && Array.isArray(spec.excludeMatches) === false) {\n    _console.default.error('\"excludeMatches\" should either be undefined or an array of match patterns', spec);\n\n    return;\n  }\n\n  CONTENT_SCRIPTS.push(spec);\n}\n/**\n * Inject content scripts from global `CONTENT_SCRIPTS` (populated by\n * `registerContentScript`) into the current window. State of the App can be\n * found in the `CLIQZ` argument and is used to know which modules are enabled.\n * Content scripts from disabled modules are ignored.\n *\n * Returns a collection of callbacks used to trigger content script actions from\n * background. These actions are optionally returned by functions registered in\n * the `js` field given to `registerContentScript`.\n */\n\n\nfunction runContentScripts(window, chrome, CLIQZ) {\n  const contentScriptActions = {};\n\n  for (const spec of CONTENT_SCRIPTS) {\n    const {\n      module,\n      js\n    } = spec;\n    const {\n      isEnabled\n    } = CLIQZ.app.modules[module] || {\n      isEnabled: false\n    };\n\n    if (isEnabled && shouldLoadScript(window, spec)) {\n      for (const script of js) {\n        try {\n          const actions = script(window, chrome, CLIQZ) || {};\n          contentScriptActions[module] = { ...contentScriptActions[module],\n            ...actions\n          };\n        } catch (e) {\n          _console.default.error(`CLIQZ content-script failed: ${e} ${e.stack}`);\n        }\n      }\n    }\n  }\n\n  return contentScriptActions;\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = _default;\n\nvar _globals = require(\"../../platform/content/globals\");\n\nvar _runtime = _interopRequireDefault(require(\"../../platform/runtime\"));\n\nvar _actionsManager = _interopRequireDefault(require(\"./actions-manager\"));\n\nvar _register = require(\"./register\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/*!\n * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n/**\n * Request App status from core background. This is the slowest way to get App\n * status but is used as a fallback. In most cases, the status will be received\n * before from the dynamic content script injected by `fast-content-app-state-injection.es`\n */\nfunction getAppStatusFromBackground() {\n  return _runtime.default.sendMessage({\n    module: 'core',\n    action: 'status'\n  }).then(app => ({\n    app\n  }));\n}\n/**\n * Here we don't know which content script was injected first. Either this one\n * is (main one defined in manifest.json) or the dynamic one is (defined in\n * `platform/fast-content-app-state-injection.es`). The following can happen:\n *\n * 1. If `window.CLIQZ` is already defined, it means the dynamic content\n * script was already injected and we already have access to the state of\n * modules.\n * 2. Otherwise, it means that we are first, and that we don't know yet the\n * state of background modules. App status can be obtained in two ways:\n *\n *   a. request status of App to core background via `sendMessage`\n *   b. dynamic content script will be injected and provide status via `runCliqz`\n *\n * Both will race and we use the result of the first of these two, the second\n * one is simply ignored.\n *\n * Overall, this strategy should result in having content scripts being\n * injected as soon as possible.\n */\n\n\nfunction getAppStatus() {\n  return new Promise(resolve => {\n    if (_globals.window.CLIQZ !== undefined) {\n      // Dynamic content-script was already injected, we can proceed\n      resolve(_globals.window.CLIQZ);\n    } else {\n      // Define `runCliqz` globally so that dynamic content script can inject\n      // App status as soon as it is injected.\n      _globals.window.runCliqz = resolve; // Dynamic content-script was not injected yet, we request status of App\n      // async. It will return the same information as dynamic content script so\n      // we take whatever comes first.\n\n      getAppStatusFromBackground().then(resolve, () => {\n        /* silence errors */\n      });\n    }\n  });\n}\n/**\n * Entrypoint for content script injection. This needs to be called so that\n * content scripts registered via `registerContentScript` in each module will\n * actually run. Check `content-script.bundle.es` for more information about the\n * overall flow.\n */\n\n\nfunction _default() {\n  // Only support injecting into HTML documents\n  if (_globals.window.document.documentElement.nodeName.toLowerCase() !== 'html') {\n    return;\n  } // Content script actions manager needs to start listening for messages from\n  // background as soon as possible since injection of actual content scripts\n  // might take a while and background could request some action before it's\n  // ready. Until content scripts are injected, messages received will be\n  // buffered in memory.\n\n\n  const contentScriptActions = new _actionsManager.default(); // Wait for App status to be received then proceed to injection\n\n  getAppStatus().then(CLIQZ => {\n    // Augment CLIQZ global to add action support. The API can then be used from\n    // content scripts of each module to transparently call actions from\n    // modules' backgrounds.\n    for (const [name, module] of Object.entries(CLIQZ.app.modules)) {\n      // eslint-disable-next-line no-param-reassign\n      module.action = (action, ...args) => _runtime.default.sendMessage({\n        module: name,\n        action,\n        args\n      });\n    } // Inject enabled content-scripts and register content-script actions so that\n    // background can request actions from them.\n\n\n    contentScriptActions.setActionCallbacks((0, _register.runContentScripts)(_globals.window, _globals.chrome, CLIQZ)); // Stop listening for messages on window unload\n\n    _globals.window.addEventListener('pagehide', () => {\n      contentScriptActions.unload();\n    }, {\n      once: true\n    });\n  });\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.deadline = deadline;\nexports.debounce = debounce;\nexports.nextIdle = nextIdle;\nexports.nextTick = nextTick;\nexports.throttle = throttle;\nexports.tryPromise = tryPromise;\nexports.withTimeout = withTimeout;\n\nvar _sleep = _interopRequireDefault(require(\"./helpers/sleep\"));\n\nvar _timers = require(\"../core/timers\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/*!\n * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nfunction throttle(window, fn, threshhold) {\n  let last;\n  let timer;\n  return (...args) => {\n    const now = Date.now();\n\n    if (last && now < last + threshhold) {\n      // reset timeout\n      window.clearTimeout(timer);\n      timer = window.setTimeout(() => {\n        last = now;\n        fn(...args);\n      }, threshhold);\n    } else {\n      last = now;\n      fn(...args);\n    }\n  };\n}\n/**\n * simple version of https://davidwalsh.name/javascript-debounce-function,\n * without options to cancel or execute immediately.\n *\n * @param {Function} fn\n * @param {number} [delay] in ms\n * @returns {Function} the debounced function,\n * or the given function when delay is falsy.\n */\n\n\nfunction debounce(fn, delay) {\n  let timeout = null;\n  return !delay ? fn : function debounced(...args) {\n    // https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/clearTimeout\n    // Passing an invalid ID to clearTimeout() silently does nothing; no exception is thrown.\n    (0, _timers.clearTimeout)(timeout);\n\n    const delayed = () => {\n      timeout = null;\n      fn(...args);\n    };\n\n    timeout = (0, _timers.setTimeout)(delayed, delay);\n  };\n}\n\nfunction deadline(promise, timeout) {\n  return Promise.race([(0, _sleep.default)(timeout), promise]);\n}\n\nfunction nextTick(fn, ...args) {\n  return Promise.resolve().then(() => fn(...args));\n}\n\nfunction nextIdle() {\n  if (typeof window === 'undefined' || !window.requestIdleCallback) {\n    return nextTick(() => {});\n  }\n\n  return new Promise(resolve => {\n    window.requestIdleCallback(resolve);\n  });\n}\n\nasync function withTimeout(promise, timeoutInMs) {\n  let timer;\n\n  try {\n    timer = new Promise((_, reject) => {\n      (0, _timers.setTimeout)(() => reject(new Error(`Timed out after ${timeoutInMs / 1000} seconds`)), timeoutInMs);\n    });\n    return await Promise.race([promise, timer]);\n  } finally {\n    (0, _timers.clearTimeout)(timer);\n  }\n} // Helper if you only want to print the result of a promise.\n\n\nasync function tryPromise(promise, timeoutInMs = 1000) {\n  try {\n    return await withTimeout(promise, timeoutInMs);\n  } catch (e) {\n    return `Failed: ${e}`;\n  }\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _runtime = _interopRequireDefault(require(\"../../platform/runtime\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/*!\n * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n/**\n * Abstract away exposing actions triggered through `sendMessage`. This is done\n * in `navigation-extension` in different contexts: content scripts, popup\n * windows, etc.\n */\nclass RemoteActionProvider {\n  constructor(module, actions) {\n    this.onMessage = message => {\n      if (message.module === module) {\n        const handler = actions[message.action];\n\n        if (handler !== undefined) {\n          // Prepare array of arguments which will be given to `handler`\n          let args = message.args || []; // Backward compatible \"hack\" since some users of this API still\n          // provide a unique argument in the form of `{ message }`. If we\n          // detect this scenario then we use it as argument for `handler`.\n\n          if (message.message !== undefined) {\n            args = [message.message];\n          }\n\n          return Promise.resolve(handler(...args));\n        }\n      }\n\n      return undefined; // not handled by us\n    };\n  }\n\n  init() {\n    _runtime.default.onMessage.addListener(this.onMessage);\n  }\n\n  unload() {\n    _runtime.default.onMessage.removeListener(this.onMessage);\n  }\n\n}\n\nexports.default = RemoteActionProvider;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = sleep;\n\nvar _timers = require(\"../timers\");\n\n/*!\n * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nfunction sleep(time) {\n  return new Promise(resolve => (0, _timers.setTimeout)(resolve, time));\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"clearInterval\", {\n  enumerable: true,\n  get: function () {\n    return _timers.clearInterval;\n  }\n});\nObject.defineProperty(exports, \"clearTimeout\", {\n  enumerable: true,\n  get: function () {\n    return _timers.clearTimeout;\n  }\n});\nObject.defineProperty(exports, \"setInterval\", {\n  enumerable: true,\n  get: function () {\n    return _timers.setInterval;\n  }\n});\nObject.defineProperty(exports, \"setTimeout\", {\n  enumerable: true,\n  get: function () {\n    return _timers.setTimeout;\n  }\n});\n\nvar _timers = require(\"../platform/timers\");","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.normalizeAclkUrl = normalizeAclkUrl;\n\n/*!\n * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n/* eslint-disable import/prefer-default-export */\n\n/**\n * Google pagead aclk look like this:\n * https://www.googleadservices.com/pagead/aclk?sa=L&ai=DChcSEwjNi5bcsbPWAhUW4BsKHUePBAwYABARGgJ3bA&ohost=www.google.de&cid=CAASEuRo7v8yDlI1j5_Xe3oAtyANqQ&sig=AOD64_0I3As2z06whZRtfqOC3PGdhk9SIQ&ctype=5&q=&ved=0ahUKEwjc7JLcsbPWAhVLuhQKHQWpCRcQ9aACCKIB&adurl=\n *\n * This function takes such an url and returns a normalized string\n * (which is no longer an url). Links to identical ads should be\n * normalized to the same string while links to different ads\n * should be mapped to different keys.\n */\nfunction normalizeAclkUrl(url) {\n  // Note: Any base URL could be used here. It is only needed as we want to support\n  // also relative URLs.\n  const parsed = new URL(url, 'https://www.googleadservices.com');\n\n  if (parsed.pathname !== '/pagead/aclk' && parsed.pathname !== '/aclk') {\n    throw new Error(`Expected Google pagead \"aclk\" URL. Instead got: ${url}`);\n  } // Ignore the \"ved\" code, as it seems to change between clicks.\n  //\n  // For background information about the \"ved\" code, see\n  // https://deedpolloffice.com/blog/articles/decoding-ved-parameter\n  //\n  // \"dct\" can also be ignored for the matching.\n\n\n  const isRelevant = entry => !['ved', 'dct'].includes(entry[0]);\n\n  const relevantParams = [...parsed.searchParams].filter(isRelevant); // Combine it into one string. The function itself does not matter as long as it is\n  // injective and is agnoistic of the ordering. Here, we will make it look like a query\n  // (\"key1=val1&key2=val2...\").\n\n  return relevantParams.sort().map(x => x.join('=')).join('&');\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.parseDom = parseDom;\n\nvar _runtime = _interopRequireDefault(require(\"../platform/runtime\"));\n\nvar _register = require(\"../core/content/register\");\n\nvar _decorators = require(\"../core/decorators\");\n\nvar _adDetection = require(\"./ad-detection\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/*!\n * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nfunction logException(e) {\n  window.console.error('[human-web] Exception caught:', e);\n} // eslint-disable-next-line import/prefer-default-export\n\n\nfunction parseDom(url, window, hw) {\n  const document = window.document; // Let's try and get META refresh to detect javascript redirects.\n\n  try {\n    let jsRef = null;\n    jsRef = document.querySelector('script');\n\n    if (jsRef && jsRef.innerHTML.indexOf('location.replace') > -1) {\n      const location = document.querySelector('title').textContent; // NOTE: this should be migrated to use:\n      // CLIQZ.modules['human-web'].action('jsRedirect', {\n      //   message: { ... }\n      // })\n\n      _runtime.default.sendMessage({\n        module: 'human-web',\n        action: 'jsRedirect',\n        args: [{\n          message: {\n            location,\n            url: document.location.href\n          }\n        }]\n      });\n    }\n  } catch (ee) {\n    logException(ee);\n  }\n\n  try {\n    let _ad = '';\n    let _h = false;\n\n    if (document.querySelector('#s0p1c0')) {\n      _ad = document.querySelector('#s0p1c0').href;\n    }\n\n    if (document.querySelector('#tads .ads-ad')) {\n      if (document.querySelector('#tads .ads-ad').offsetParent === null) _h = true;\n    }\n\n    const additionalInfo = {\n      type: 'dom',\n      ad: _ad,\n      hidden: _h\n    };\n    hw.action('contentScriptTopAds', {\n      message: additionalInfo\n    });\n  } catch (ee) {\n    logException(ee);\n  } // We need to get all the ADS from this page.\n\n\n  try {\n    const adDetails = {};\n    const doc = window.document;\n    let noAdsOnThisPage = 0;\n    const detectAdRules = {\n      query: {\n        element: '#rso',\n        attribute: 'data-async-context'\n      },\n      adSections: ['#tads div[data-text-ad]', '.pla-unit-container', '.pla-hovercard-content-ellip', '.cu-container tr'],\n      0: {\n        cu: 'a',\n        cuAttr: 'data-rw',\n        fu: 'a'\n      },\n      1: {\n        cu: \"a[id^='plaurlg']\",\n        fu: \"a[id^='vplaurlg']\"\n      },\n      2: {\n        // TODO: most likely dead\n        cu: \"a[id^='plaurlh']\",\n        fu: \"a[id^='vplaurlh']\"\n      },\n      3: {\n        cu: \"a[id^='plaurlt']\",\n        fu: \"a[id^='vplaurlt']\"\n      }\n    }; // We need to scrape the query too.\n\n    const queryElement = doc.querySelector(detectAdRules.query.element);\n    let query = '';\n\n    if (queryElement) {\n      query = queryElement.getAttribute(detectAdRules.query.attribute).replace('query:', '');\n\n      try {\n        query = decodeURIComponent(query);\n      } catch (ee) {// empty\n      }\n    } // Let's iterate over each possible section of the ads.\n\n\n    detectAdRules.adSections.forEach((eachAdSection, idx) => {\n      const adNodes = Array.prototype.slice.call(doc.querySelectorAll(eachAdSection));\n      adNodes.forEach(eachAd => {\n        const cuRule = detectAdRules[idx].cu;\n        const fuRule = detectAdRules[idx].fu;\n        const clink = eachAd.querySelector(cuRule);\n        const flink = eachAd.querySelector(fuRule);\n\n        if (clink && flink) {\n          const cuAttr = detectAdRules[idx].cuAttr || 'href';\n          const clickPattern = (0, _adDetection.normalizeAclkUrl)(clink.getAttribute(cuAttr));\n          const fuAttr = detectAdRules[idx].fuAttr || 'href';\n          adDetails[clickPattern] = {\n            ts: Date.now(),\n            query,\n            furl: [flink.getAttribute('data-preconnect-urls'), flink.getAttribute(fuAttr)] // At times there is a redirect chain, we only want the final domain.\n\n          };\n          noAdsOnThisPage += 1;\n        }\n      });\n    });\n\n    if (noAdsOnThisPage > 0) {\n      hw.action('adClick', {\n        ads: adDetails\n      });\n    }\n  } catch (ee) {\n    logException(ee);\n  }\n}\n\nfunction contentScript(window, chrome, CLIQZ) {\n  const url = window.location.href;\n  const hw = CLIQZ.app.modules['human-web']; // Only add for main pages.\n\n  if (window.top === window) {\n    window.addEventListener('DOMContentLoaded', () => {\n      parseDom(url, window, hw);\n    });\n  }\n\n  function proxyWindowEvent(action) {\n    return ev => {\n      hw.action(action, {\n        target: {\n          baseURI: ev.target.baseURI\n        }\n      });\n    };\n  }\n\n  const onKeyPress = (0, _decorators.throttle)(window, proxyWindowEvent('hw:keypress'), 250);\n  const onMouseMove = (0, _decorators.throttle)(window, proxyWindowEvent('hw:mousemove'), 250);\n  const onScroll = (0, _decorators.throttle)(window, proxyWindowEvent('hw:scroll'), 250);\n  const onCopy = (0, _decorators.throttle)(window, proxyWindowEvent('hw:copy'), 250);\n  window.addEventListener('keypress', onKeyPress);\n  window.addEventListener('mousemove', onMouseMove);\n  window.addEventListener('scroll', onScroll);\n  window.addEventListener('copy', onCopy);\n\n  function stop(ev) {\n    if (ev && ev.target !== window.document) {\n      return;\n    } // detect dead windows\n    // https://developer.mozilla.org/de/docs/Web/JavaScript/Reference/Errors/Dead_object\n\n\n    try {\n      String(window);\n    } catch (e) {\n      return;\n    }\n\n    window.removeEventListener('keypress', onKeyPress);\n    window.removeEventListener('mousemove', onMouseMove);\n    window.removeEventListener('scroll', onScroll);\n    window.removeEventListener('copy', onCopy);\n  }\n\n  window.addEventListener('pagehide', stop);\n}\n\n(0, _register.registerContentScript)({\n  module: 'human-web',\n  matches: ['http://*/*', 'https://*/*'],\n  js: [contentScript],\n  allFrames: true\n});","\"use strict\";\n\nvar _register = require(\"../core/content/register\");\n\nvar _timers = require(\"../core/timers\");\n\n/*!\n * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nfunction analyzePageInfo(CLIQZ) {\n  const {\n    host,\n    hostname,\n    pathname,\n    protocol\n  } = document.location;\n  const pTime = performance.timing.domContentLoadedEventStart - performance.timing.requestStart;\n  const pageLatency = pTime || 0;\n  CLIQZ.app.modules.insights.action('recordPageInfo', {\n    domain: `${protocol}//${host}${pathname}`,\n    host: hostname,\n    timestamp: performance.timing.navigationStart,\n    latency: pageLatency,\n    pageTiming: {\n      timing: {\n        navigationStart: performance.timing.navigationStart,\n        loadEventEnd: performance.timing.loadEventEnd\n      }\n    }\n  });\n}\n\nfunction contentScript(window, chrome, CLIQZ) {\n  if (document.readyState !== 'complete') {\n    window.addEventListener('load', () => {\n      (0, _timers.setTimeout)(() => {\n        analyzePageInfo(CLIQZ);\n      }, 1);\n    });\n  } else {\n    analyzePageInfo(CLIQZ);\n  }\n}\n\n(0, _register.registerContentScript)({\n  module: 'insights',\n  matches: ['http://*/*', 'https://*/*'],\n  js: [contentScript]\n});","\"use strict\";\n\nrequire(\"./core/content\");\n\nrequire(\"./human-web/content\");\n\nrequire(\"./antitracking/content\");\n\nrequire(\"./adblocker/content\");\n\nrequire(\"./insights/content\");","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.window = exports.chrome = void 0;\n\n/*!\n * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nconst newChrome = typeof browser !== 'undefined' ? browser : chrome;\nexports.chrome = newChrome;\nconst newWindow = window;\nexports.window = newWindow;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"default\", {\n  enumerable: true,\n  get: function () {\n    return _adblockerWebextensionCosmetics.injectCosmetics;\n  }\n});\n\nvar _adblockerWebextensionCosmetics = require(\"@cliqz/adblocker-webextension-cosmetics\");","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _webextensionPolyfill = _interopRequireDefault(require(\"webextension-polyfill\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/*!\n * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// NOTE: this is an attempt at using `webextension-polyfill` to abstract away\n// API differences between different browser (e.g.: promisify chrome functions).\n// Eventually, it could be used globally from 'platforms/webextension/globals.es'.\nvar _default = (typeof browser !== 'undefined' ? browser : _webextensionPolyfill.default).runtime;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setTimeout = exports.setInterval = exports.clearTimeout = exports.clearInterval = void 0;\n\n/*!\n * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nconst _setTimeout = (...args) => (typeof setTimeout === 'undefined' ? window.setTimeout.bind(window) : setTimeout)(...args);\n\nexports.setTimeout = _setTimeout;\n\nconst _setInterval = (...args) => (typeof setInterval === 'undefined' ? window.setInterval.bind(window) : setInterval)(...args);\n\nexports.setInterval = _setInterval;\n\nconst _clearTimeout = (...args) => (typeof clearTimeout === 'undefined' ? window.clearTimeout.bind(window) : clearTimeout)(...args);\n\nexports.clearTimeout = _clearTimeout;\n\nconst _clearInterval = (...args) => (typeof clearInterval === 'undefined' ? window.clearInterval.bind(window) : clearInterval)(...args);\n\nexports.clearInterval = _clearInterval;","'use strict';\n\n/*!\n * Copyright (c) 2017-present Cliqz GmbH. All rights reserved.\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nconst SCRIPT_ID = 'cliqz-adblocker-script';\nconst IGNORED_TAGS = new Set(['br', 'head', 'link', 'meta', 'script', 'style', 's']);\nfunction debounce(fn, { waitFor, maxWait, }) {\n    let delayedTimer;\n    let maxWaitTimer;\n    const clear = () => {\n        clearTimeout(delayedTimer);\n        clearTimeout(maxWaitTimer);\n        delayedTimer = undefined;\n        maxWaitTimer = undefined;\n    };\n    const run = () => {\n        clear();\n        fn();\n    };\n    return [\n        () => {\n            if (maxWait > 0 && maxWaitTimer === undefined) {\n                maxWaitTimer = setTimeout(run, maxWait);\n            }\n            clearTimeout(delayedTimer);\n            delayedTimer = setTimeout(run, waitFor);\n        },\n        clear,\n    ];\n}\nfunction isElement(node) {\n    // https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeType#node_type_constants\n    return node.nodeType === 1; // Node.ELEMENT_NODE;\n}\nfunction getElementsFromMutations(mutations) {\n    // Accumulate all nodes which were updated in `nodes`\n    const elements = [];\n    for (const mutation of mutations) {\n        if (mutation.type === 'attributes') {\n            if (isElement(mutation.target)) {\n                elements.push(mutation.target);\n            }\n        }\n        else if (mutation.type === 'childList') {\n            for (const addedNode of mutation.addedNodes) {\n                if (isElement(addedNode) && addedNode.id !== SCRIPT_ID) {\n                    elements.push(addedNode);\n                }\n            }\n        }\n    }\n    return elements;\n}\n/**\n * WARNING: this function should be self-contained and not rely on any global\n * symbol. That constraint needs to be fulfilled because this function can\n * potentially be injected in content-script (e.g.: see PuppeteerBlocker for\n * more details).\n */\nfunction extractFeaturesFromDOM(roots) {\n    // NOTE: This cannot be global as puppeteer needs to be able to serialize this function.\n    const ignoredTags = new Set(['br', 'head', 'link', 'meta', 'script', 'style', 's']);\n    const classes = new Set();\n    const hrefs = new Set();\n    const ids = new Set();\n    const seenElements = new Set();\n    for (const root of roots) {\n        for (const element of [\n            root,\n            ...root.querySelectorAll('[id]:not(html):not(body),[class]:not(html):not(body),[href]:not(html):not(body)'),\n        ]) {\n            // If one of root belongs to another root which is parent node of the one, querySelectorAll can return duplicates.\n            if (seenElements.has(element)) {\n                continue;\n            }\n            seenElements.add(element);\n            // Any conditions to filter this element out should be placed under this line:\n            if (ignoredTags.has(element.nodeName.toLowerCase())) {\n                continue;\n            }\n            // Update ids\n            const id = element.id;\n            if (id) {\n                ids.add(id);\n            }\n            // Update classes\n            const classList = element.classList;\n            for (const classEntry of classList) {\n                classes.add(classEntry);\n            }\n            // Update href\n            const href = element.getAttribute('href');\n            if (typeof href === 'string') {\n                hrefs.add(href);\n            }\n        }\n    }\n    return {\n        classes: Array.from(classes),\n        hrefs: Array.from(hrefs),\n        ids: Array.from(ids),\n    };\n}\nclass DOMMonitor {\n    constructor(cb) {\n        this.cb = cb;\n        this.knownIds = new Set();\n        this.knownHrefs = new Set();\n        this.knownClasses = new Set();\n        this.observer = null;\n    }\n    queryAll(window) {\n        this.cb({ type: 'elements', elements: [window.document.documentElement] });\n        this.handleUpdatedNodes([window.document.documentElement]);\n    }\n    start(window) {\n        if (this.observer === null && window.MutationObserver !== undefined) {\n            const nodes = new Set();\n            const handleUpdatedNodesCallback = () => {\n                this.handleUpdatedNodes(Array.from(nodes));\n                nodes.clear();\n            };\n            const [debouncedHandleUpdatedNodes, cancelHandleUpdatedNodes] = debounce(handleUpdatedNodesCallback, {\n                waitFor: 25,\n                maxWait: 1000,\n            });\n            this.observer = new window.MutationObserver((mutations) => {\n                getElementsFromMutations(mutations).forEach(nodes.add, nodes);\n                // Set a threshold to prevent websites continuously\n                // causing DOM mutations making the set being filled up infinitely.\n                if (nodes.size > 512) {\n                    cancelHandleUpdatedNodes();\n                    handleUpdatedNodesCallback();\n                }\n                else {\n                    debouncedHandleUpdatedNodes();\n                }\n            });\n            this.observer.observe(window.document.documentElement, {\n                // Monitor some attributes\n                attributes: true,\n                attributeFilter: ['class', 'id', 'href'],\n                childList: true,\n                subtree: true,\n            });\n        }\n    }\n    stop() {\n        if (this.observer !== null) {\n            this.observer.disconnect();\n            this.observer = null;\n        }\n    }\n    handleNewFeatures({ hrefs, ids, classes, }) {\n        const newIds = [];\n        const newClasses = [];\n        const newHrefs = [];\n        // Update ids\n        for (const id of ids) {\n            if (this.knownIds.has(id) === false) {\n                newIds.push(id);\n                this.knownIds.add(id);\n            }\n        }\n        for (const cls of classes) {\n            if (this.knownClasses.has(cls) === false) {\n                newClasses.push(cls);\n                this.knownClasses.add(cls);\n            }\n        }\n        for (const href of hrefs) {\n            if (this.knownHrefs.has(href) === false) {\n                newHrefs.push(href);\n                this.knownHrefs.add(href);\n            }\n        }\n        if (newIds.length !== 0 || newClasses.length !== 0 || newHrefs.length !== 0) {\n            this.cb({\n                type: 'features',\n                classes: newClasses,\n                hrefs: newHrefs,\n                ids: newIds,\n            });\n            return true;\n        }\n        return false;\n    }\n    handleUpdatedNodes(elements) {\n        if (elements.length !== 0) {\n            this.cb({\n                type: 'elements',\n                elements: elements.filter((e) => IGNORED_TAGS.has(e.nodeName.toLowerCase()) === false),\n            });\n            return this.handleNewFeatures(extractFeaturesFromDOM(elements));\n        }\n        return false;\n    }\n}\n/**\n * Wrap a self-executing script into a block of custom logic to remove the\n * script tag once execution is terminated. This can be useful to not leave\n * traces in the DOM after injections.\n */\nfunction autoRemoveScript(script) {\n    // Minified using 'terser'\n    return `try{${script}}catch(c){}!function(){var c=document.currentScript,e=c&&c.parentNode;e&&e.removeChild(c)}();`;\n    // Original:\n    //\n    //    try {\n    //      ${script}\n    //    } catch (ex) { }\n    //\n    //    (function() {\n    //      var currentScript = document.currentScript;\n    //      var parent = currentScript && currentScript.parentNode;\n    //\n    //      if (parent) {\n    //        parent.removeChild(currentScript);\n    //      }\n    //    })();\n}\nfunction insertNode(node, document) {\n    const parent = document.head || document.documentElement || document;\n    if (parent !== null) {\n        parent.appendChild(node);\n    }\n}\nfunction injectScriptlet(s, doc) {\n    const script = doc.createElement('script');\n    script.type = 'text/javascript';\n    script.id = SCRIPT_ID;\n    script.async = false;\n    script.appendChild(doc.createTextNode(autoRemoveScript(s)));\n    insertNode(script, doc);\n}\nfunction isFirefox(doc) {\n    var _a, _b, _c;\n    try {\n        return ((_c = (_b = (_a = doc.defaultView) === null || _a === void 0 ? void 0 : _a.navigator) === null || _b === void 0 ? void 0 : _b.userAgent) === null || _c === void 0 ? void 0 : _c.indexOf('Firefox')) !== -1;\n    }\n    catch (e) {\n        return false;\n    }\n}\nasync function injectScriptletFirefox(s, doc) {\n    const win = doc.defaultView;\n    const script = doc.createElement('script');\n    script.async = false;\n    script.id = SCRIPT_ID;\n    const blob = new win.Blob([autoRemoveScript(s)], { type: 'text/javascript; charset=utf-8' });\n    const url = win.URL.createObjectURL(blob);\n    // a hack for tests to that allows for async URL.createObjectURL\n    // eslint-disable-next-line @typescript-eslint/await-thenable\n    script.src = await url;\n    insertNode(script, doc);\n    win.URL.revokeObjectURL(url);\n}\nfunction injectScript(s, doc) {\n    if (isFirefox(doc)) {\n        injectScriptletFirefox(s, doc);\n    }\n    else {\n        injectScriptlet(s, doc);\n    }\n}\n\nexports.DOMMonitor = DOMMonitor;\nexports.autoRemoveScript = autoRemoveScript;\nexports.extractFeaturesFromDOM = extractFeaturesFromDOM;\nexports.injectScript = injectScript;\n//# sourceMappingURL=adblocker.cjs.map\n","'use strict';\n\nvar parse = require('./src/parse.cjs');\nvar _eval = require('./src/eval.cjs');\nvar types = require('./src/types.cjs');\nvar extended = require('./src/extended.cjs');\n\n\n\nexports.parse = parse.parse;\nexports.tokenize = parse.tokenize;\nexports.matches = _eval.matches;\nexports.querySelectorAll = _eval.querySelectorAll;\nexports.isAST = types.isAST;\nexports.isAtoms = types.isAtoms;\nexports.EXTENDED_PSEUDO_CLASSES = extended.EXTENDED_PSEUDO_CLASSES;\nexports.PSEUDO_CLASSES = extended.PSEUDO_CLASSES;\nexports.PSEUDO_ELEMENTS = extended.PSEUDO_ELEMENTS;\nObject.defineProperty(exports, \"SelectorType\", {\n\tenumerable: true,\n\tget: function () { return extended.SelectorType; }\n});\nexports.classifySelector = extended.classifySelector;\n//# sourceMappingURL=adblocker.cjs.map\n","'use strict';\n\n/*!\n * Copyright (c) 2017-present Cliqz GmbH. All rights reserved.\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nfunction matchPattern(pattern, text) {\n    // TODO - support 'm' RegExp argument\n    if (pattern.startsWith('/') && (pattern.endsWith('/') || pattern.endsWith('/i'))) {\n        let caseSensitive = true;\n        pattern = pattern.slice(1);\n        if (pattern.endsWith('/')) {\n            pattern = pattern.slice(0, -1);\n        }\n        else {\n            pattern = pattern.slice(0, -2);\n            caseSensitive = false;\n        }\n        return new RegExp(pattern, caseSensitive === false ? 'i' : undefined).test(text);\n    }\n    return text.includes(pattern);\n}\nfunction matches(element, selector) {\n    if (selector.type === 'id' ||\n        selector.type === 'class' ||\n        selector.type === 'type' ||\n        selector.type === 'attribute') {\n        return element.matches(selector.content);\n    }\n    else if (selector.type === 'list') {\n        return selector.list.some((s) => matches(element, s));\n    }\n    else if (selector.type === 'compound') {\n        return selector.compound.every((s) => matches(element, s));\n    }\n    else if (selector.type === 'pseudo-class') {\n        if (selector.name === 'has' || selector.name === 'if') {\n            // TODO - is this a querySelectorAll or matches here?\n            return (selector.subtree !== undefined && querySelectorAll(element, selector.subtree).length !== 0);\n        }\n        else if (selector.name === 'not') {\n            return selector.subtree !== undefined && matches(element, selector.subtree) === false;\n        }\n        else if (selector.name === 'has-text') {\n            const { argument } = selector;\n            if (argument === undefined) {\n                return false;\n            }\n            const text = element.textContent;\n            if (text === null) {\n                return false;\n            }\n            return matchPattern(argument, text);\n        }\n        else if (selector.name === 'min-text-length') {\n            const minLength = Number(selector.argument);\n            if (Number.isNaN(minLength) || minLength < 0) {\n                return false;\n            }\n            const text = element.textContent;\n            if (text === null) {\n                return false;\n            }\n            return text.length >= minLength;\n        }\n    }\n    return false;\n}\nfunction querySelectorAll(element, selector) {\n    const elements = [];\n    if (selector.type === 'id' ||\n        selector.type === 'class' ||\n        selector.type === 'type' ||\n        selector.type === 'attribute') {\n        elements.push(...element.querySelectorAll(selector.content));\n    }\n    else if (selector.type === 'list') {\n        for (const subSelector of selector.list) {\n            elements.push(...querySelectorAll(element, subSelector));\n        }\n    }\n    else if (selector.type === 'compound') {\n        // TODO - handling compound needs to be reworked...\n        // .cls:upward(1) for example will not work with this implementation.\n        // :upward is not about selecting, but transforming a set of nodes (i.e.\n        // uBO's transpose method).\n        if (selector.compound.length !== 0) {\n            elements.push(...querySelectorAll(element, selector.compound[0]).filter((e) => selector.compound.slice(1).every((s) => matches(e, s))));\n        }\n    }\n    else if (selector.type === 'complex') {\n        const elements2 = selector.left === undefined ? [element] : querySelectorAll(element, selector.left);\n        if (selector.combinator === ' ') {\n            for (const element2 of elements2) {\n                elements.push(...querySelectorAll(element2, selector.right));\n            }\n        }\n        else if (selector.combinator === '>') {\n            for (const element2 of elements2) {\n                for (const child of element2.children) {\n                    if (matches(child, selector.right) === true) {\n                        elements.push(child);\n                    }\n                }\n            }\n        }\n        else if (selector.combinator === '~') {\n            for (const element2 of elements2) {\n                let sibling = element2;\n                while ((sibling = sibling.nextElementSibling) !== null) {\n                    if (matches(sibling, selector.right) === true) {\n                        elements.push(sibling);\n                    }\n                }\n            }\n        }\n        else if (selector.combinator === '+') {\n            for (const element2 of elements2) {\n                const nextElementSibling = element2.nextElementSibling;\n                if (nextElementSibling !== null && matches(nextElementSibling, selector.right) === true) {\n                    elements.push(nextElementSibling);\n                }\n            }\n        }\n    }\n    else if (selector.type === 'pseudo-class') {\n        // if (selector.name === 'upward') {\n        //   let n = Number(selector.argument);\n        //   console.log('upward', selector, n);\n        //   if (Number.isNaN(n) === false) {\n        //     if (n >= 1 && n < 256) {\n        //       let ancestor: Element | null = element;\n        //       while (ancestor !== null && n > 0) {\n        //         ancestor = ancestor.parentElement;\n        //         n -= 1;\n        //       }\n        //       if (ancestor !== null && n === 0) {\n        //         elements.push(element);\n        //       }\n        //     }\n        //   } else if (selector.argument !== undefined) {\n        //     const parent = element.parentElement;\n        //     if (parent !== null) {\n        //       const ancestor = parent.closest(selector.argument);\n        //       if (ancestor !== null) {\n        //         elements.push(ancestor);\n        //       }\n        //     }\n        //   }\n        // } else {\n        for (const subElement of element.querySelectorAll('*')) {\n            if (matches(subElement, selector) === true) {\n                elements.push(subElement);\n            }\n        }\n        // }\n    }\n    return elements;\n}\n\nexports.matchPattern = matchPattern;\nexports.matches = matches;\nexports.querySelectorAll = querySelectorAll;\n//# sourceMappingURL=eval.cjs.map\n","'use strict';\n\nvar parse = require('./parse.cjs');\n\n/*!\n * Copyright (c) 2017-present Cliqz GmbH. All rights reserved.\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nconst EXTENDED_PSEUDO_CLASSES = new Set([\n    // '-abp-contains',\n    // '-abp-has',\n    // '-abp-properties',\n    'has',\n    'has-text',\n    'if',\n    // 'if-not',\n    // 'matches-css',\n    // 'matches-css-after',\n    // 'matches-css-before',\n    // 'min-text-length',\n    // 'nth-ancestor',\n    // 'upward',\n    // 'watch-attr',\n    // 'watch-attrs',\n    // 'xpath',\n]);\nconst PSEUDO_CLASSES = new Set([\n    'active',\n    'any',\n    'any-link',\n    'blank',\n    'checked',\n    'default',\n    'defined',\n    'dir',\n    'disabled',\n    'empty',\n    'enabled',\n    'first',\n    'first-child',\n    'first-of-type',\n    'focus',\n    'focus-visible',\n    'focus-within',\n    'fullscreen',\n    'host',\n    'host-context',\n    'hover',\n    'in-range',\n    'indeterminate',\n    'invalid',\n    'is',\n    'lang',\n    'last-child',\n    'last-of-type',\n    'left',\n    'link',\n    'matches',\n    // NOTE: by default we consider `:not(...)` to be a normal CSS selector since,\n    // we are only interested in cases where the argument is an extended selector.\n    // If that is the case, it will still be detected as such.\n    'not',\n    'nth-child',\n    'nth-last-child',\n    'nth-last-of-type',\n    'nth-of-type',\n    'only-child',\n    'only-of-type',\n    'optional',\n    'out-of-range',\n    'placeholder-shown',\n    'read-only',\n    'read-write',\n    'required',\n    'right',\n    'root',\n    'scope',\n    'target',\n    'valid',\n    'visited',\n    'where',\n]);\n// NOTE: here we only need to list the pseudo-elements which can appear with a\n// single colon (e.g. :after or ::after are valid for backward compatibility\n// reasons). They can be misinterpreted as pseudo-classes by the tokenizer for\n// this reason.\nconst PSEUDO_ELEMENTS = new Set(['after', 'before', 'first-letter', 'first-line']);\nexports.SelectorType = void 0;\n(function (SelectorType) {\n    SelectorType[SelectorType[\"Normal\"] = 0] = \"Normal\";\n    SelectorType[SelectorType[\"Extended\"] = 1] = \"Extended\";\n    SelectorType[SelectorType[\"Invalid\"] = 2] = \"Invalid\";\n})(exports.SelectorType || (exports.SelectorType = {}));\nfunction classifySelector(selector) {\n    // In most cases there is no pseudo-anything so we can quickly exit.\n    if (selector.indexOf(':') === -1) {\n        return exports.SelectorType.Normal;\n    }\n    const tokens = parse.tokenize(selector);\n    // Detect pseudo-classes\n    let foundSupportedExtendedSelector = false;\n    for (const token of tokens) {\n        if (token.type === 'pseudo-class') {\n            const { name } = token;\n            if (EXTENDED_PSEUDO_CLASSES.has(name) === true) {\n                foundSupportedExtendedSelector = true;\n            }\n            else if (PSEUDO_CLASSES.has(name) === false && PSEUDO_ELEMENTS.has(name) === false) {\n                return exports.SelectorType.Invalid;\n            }\n            // Recursively\n            if (foundSupportedExtendedSelector === false &&\n                token.argument !== undefined &&\n                parse.RECURSIVE_PSEUDO_CLASSES.has(name) === true) {\n                const argumentType = classifySelector(token.argument);\n                if (argumentType === exports.SelectorType.Invalid) {\n                    return argumentType;\n                }\n                else if (argumentType === exports.SelectorType.Extended) {\n                    foundSupportedExtendedSelector = true;\n                }\n            }\n        }\n    }\n    if (foundSupportedExtendedSelector === true) {\n        return exports.SelectorType.Extended;\n    }\n    return exports.SelectorType.Normal;\n}\n\nexports.EXTENDED_PSEUDO_CLASSES = EXTENDED_PSEUDO_CLASSES;\nexports.PSEUDO_CLASSES = PSEUDO_CLASSES;\nexports.PSEUDO_ELEMENTS = PSEUDO_ELEMENTS;\nexports.classifySelector = classifySelector;\n//# sourceMappingURL=extended.cjs.map\n","'use strict';\n\nvar types = require('./types.cjs');\n\n/*!\n * Based on parsel. Extended by Rmi Berson for Ghostery (2021).\n * https://github.com/LeaVerou/parsel\n *\n * MIT License\n *\n * Copyright (c) 2020 Lea Verou\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\nconst RECURSIVE_PSEUDO_CLASSES = new Set([\n    'any',\n    'dir',\n    'has',\n    'host-context',\n    'if',\n    'if-not',\n    'is',\n    'matches',\n    'not',\n    'where',\n]);\nconst TOKENS = {\n    attribute: /\\[\\s*(?:(?<namespace>\\*|[-\\w]*)\\|)?(?<name>[-\\w\\u{0080}-\\u{FFFF}]+)\\s*(?:(?<operator>\\W?=)\\s*(?<value>.+?)\\s*(?<caseSensitive>[iIsS])?\\s*)?\\]/gu,\n    id: /#(?<name>(?:[-\\w\\u{0080}-\\u{FFFF}]|\\\\.)+)/gu,\n    class: /\\.(?<name>(?:[-\\w\\u{0080}-\\u{FFFF}]|\\\\.)+)/gu,\n    comma: /\\s*,\\s*/g, // must be before combinator\n    combinator: /\\s*[\\s>+~]\\s*/g, // this must be after attribute\n    'pseudo-element': /::(?<name>[-\\w\\u{0080}-\\u{FFFF}]+)(?:\\((?:*)\\))?/gu, // this must be before pseudo-class\n    'pseudo-class': /:(?<name>[-\\w\\u{0080}-\\u{FFFF}]+)(?:\\((?<argument>*)\\))?/gu,\n    type: /(?:(?<namespace>\\*|[-\\w]*)\\|)?(?<name>[-\\w\\u{0080}-\\u{FFFF}]+)|\\*/gu, // this must be last\n};\nconst TOKENS_WITH_PARENS = new Set(['pseudo-class', 'pseudo-element']);\nconst TOKENS_WITH_STRINGS = new Set([...TOKENS_WITH_PARENS, 'attribute']);\nconst TRIM_TOKENS = new Set(['combinator', 'comma']);\nconst TOKENS_FOR_RESTORE = Object.assign({}, TOKENS);\nTOKENS_FOR_RESTORE['pseudo-element'] = RegExp(TOKENS['pseudo-element'].source.replace('(?<argument>*)', '(?<argument>.*?)'), 'gu');\nTOKENS_FOR_RESTORE['pseudo-class'] = RegExp(TOKENS['pseudo-class'].source.replace('(?<argument>*)', '(?<argument>.*)'), 'gu');\n// TODO - it feels like with some more typing shenanigans we could replace groups validation by generic logic in this function.\nfunction splitOnMatch(pattern, str) {\n    pattern.lastIndex = 0;\n    const match = pattern.exec(str);\n    if (match === null) {\n        return undefined;\n    }\n    const from = match.index - 1;\n    const content = match[0];\n    const before = str.slice(0, from + 1);\n    const after = str.slice(from + content.length + 1);\n    return [before, [content, match.groups || {}], after];\n}\nconst GRAMMAR = [\n    // attribute\n    (str) => {\n        const match = splitOnMatch(TOKENS.attribute, str);\n        if (match === undefined) {\n            return undefined;\n        }\n        const [before, [content, { name, operator, value, namespace, caseSensitive }], after] = match;\n        if (name === undefined) {\n            return undefined;\n        }\n        return [\n            before,\n            {\n                type: 'attribute',\n                content,\n                length: content.length,\n                namespace,\n                caseSensitive,\n                pos: [],\n                name,\n                operator,\n                value,\n            },\n            after,\n        ];\n    },\n    // #id\n    (str) => {\n        const match = splitOnMatch(TOKENS.id, str);\n        if (match === undefined) {\n            return undefined;\n        }\n        const [before, [content, { name }], after] = match;\n        if (name === undefined) {\n            return undefined;\n        }\n        return [\n            before,\n            {\n                type: 'id',\n                content,\n                length: content.length,\n                pos: [],\n                name,\n            },\n            after,\n        ];\n    },\n    // .class\n    (str) => {\n        const match = splitOnMatch(TOKENS.class, str);\n        if (match === undefined) {\n            return undefined;\n        }\n        const [before, [content, { name }], after] = match;\n        if (name === undefined) {\n            return undefined;\n        }\n        return [\n            before,\n            {\n                type: 'class',\n                content,\n                length: content.length,\n                pos: [],\n                name,\n            },\n            after,\n        ];\n    },\n    // comma ,\n    (str) => {\n        const match = splitOnMatch(TOKENS.comma, str);\n        if (match === undefined) {\n            return undefined;\n        }\n        const [before, [content], after] = match;\n        return [\n            before,\n            {\n                type: 'comma',\n                content,\n                length: content.length,\n                pos: [],\n            },\n            after,\n        ];\n    },\n    // combinator\n    (str) => {\n        const match = splitOnMatch(TOKENS.combinator, str);\n        if (match === undefined) {\n            return undefined;\n        }\n        const [before, [content], after] = match;\n        return [\n            before,\n            {\n                type: 'combinator',\n                content,\n                length: content.length,\n                pos: [],\n            },\n            after,\n        ];\n    },\n    // pseudo-element\n    (str) => {\n        const match = splitOnMatch(TOKENS['pseudo-element'], str);\n        if (match === undefined) {\n            return undefined;\n        }\n        const [before, [content, { name }], after] = match;\n        if (name === undefined) {\n            return undefined;\n        }\n        return [\n            before,\n            {\n                type: 'pseudo-element',\n                content,\n                length: content.length,\n                pos: [],\n                name,\n            },\n            after,\n        ];\n    },\n    // pseudo-class\n    (str) => {\n        const match = splitOnMatch(TOKENS['pseudo-class'], str);\n        if (match === undefined) {\n            return undefined;\n        }\n        // TODO - here `argument` can be undefined and should be rejected?\n        const [before, [content, { name, argument }], after] = match;\n        if (name === undefined) {\n            return undefined;\n        }\n        return [\n            before,\n            {\n                type: 'pseudo-class',\n                content,\n                length: content.length,\n                pos: [],\n                name,\n                argument,\n                subtree: undefined,\n            },\n            after,\n        ];\n    },\n    // type\n    (str) => {\n        const match = splitOnMatch(TOKENS.type, str);\n        if (match === undefined) {\n            return undefined;\n        }\n        const [before, [content, { name, namespace }], after] = match;\n        return [\n            before,\n            {\n                type: 'type',\n                content,\n                length: content.length,\n                namespace,\n                pos: [],\n                name,\n            },\n            after,\n        ];\n    },\n];\nfunction tokenizeBy(text) {\n    if (!text) {\n        return [];\n    }\n    const strarr = [text];\n    for (const tokenizer of GRAMMAR) {\n        for (let i = 0; i < strarr.length; i++) {\n            const str = strarr[i];\n            if (typeof str === 'string') {\n                const match = tokenizer(str);\n                if (match !== undefined) {\n                    strarr.splice(i, 1, ...match.filter((a) => a.length !== 0));\n                }\n            }\n        }\n    }\n    let offset = 0;\n    for (const token of strarr) {\n        if (typeof token !== 'string') {\n            token.pos = [offset, offset + token.length];\n            if (TRIM_TOKENS.has(token.type)) {\n                token.content = token.content.trim() || ' ';\n            }\n        }\n        offset += token.length;\n    }\n    if (types.isAtoms(strarr)) {\n        return strarr;\n    }\n    // NOTE: here this means that parsing failed.\n    return [];\n}\nfunction restoreNested(tokens, strings, regex, types) {\n    // TODO - here from offsets in strings and tokens we should be able to find the exact spot without RegExp?\n    for (const str of strings) {\n        for (const token of tokens) {\n            if (types.has(token.type) && token.pos[0] < str.start && str.start < token.pos[1]) {\n                const content = token.content;\n                token.content = token.content.replace(regex, str.str);\n                if (token.content !== content) {\n                    // actually changed?\n                    // Re-evaluate groups\n                    TOKENS_FOR_RESTORE[token.type].lastIndex = 0;\n                    const match = TOKENS_FOR_RESTORE[token.type].exec(token.content);\n                    if (match !== null) {\n                        Object.assign(token, match.groups);\n                    }\n                }\n            }\n        }\n    }\n}\nfunction isEscaped(str, index) {\n    let backslashes = 0;\n    index -= 1;\n    while (index >= 0 && str[index] === '\\\\') {\n        backslashes += 1;\n        index -= 1;\n    }\n    return backslashes % 2 !== 0;\n}\nfunction gobbleQuotes(text, quote, start) {\n    // Find end of quote, taking care of ignoring escaped quotes\n    let end = start + 1;\n    while ((end = text.indexOf(quote, end)) !== -1 && isEscaped(text, end) === true) {\n        end += 1;\n    }\n    if (end === -1) {\n        // Opening quote without closing quote\n        return undefined;\n    }\n    return text.slice(start, end + 1);\n}\nfunction gobbleParens(text, start) {\n    let stack = 0;\n    for (let i = start; i < text.length; i++) {\n        const char = text[i];\n        if (char === '(') {\n            stack += 1;\n        }\n        else if (char === ')') {\n            if (stack > 0) {\n                stack -= 1;\n            }\n            else {\n                // Closing paren without opening paren\n                return undefined;\n            }\n        }\n        if (stack === 0) {\n            return text.slice(start, i + 1);\n        }\n    }\n    // Opening paren without closing paren\n    return undefined;\n}\nfunction replace(selector, replacement, opening, gobble) {\n    const strings = [];\n    let offset = 0;\n    while ((offset = selector.indexOf(opening, offset)) !== -1) {\n        const str = gobble(selector, offset);\n        if (str === undefined) {\n            break;\n        }\n        strings.push({ str, start: offset });\n        selector = `${selector.slice(0, offset + 1)}${replacement.repeat(str.length - 2)}${selector.slice(offset + str.length - 1)}`;\n        offset += str.length;\n    }\n    return [strings, selector];\n}\nfunction tokenize(selector) {\n    if (typeof selector !== 'string') {\n        return [];\n    }\n    // Prevent leading/trailing whitespace be interpreted as combinators\n    selector = selector.trim();\n    if (selector.length === 0) {\n        return [];\n    }\n    // Replace strings with whitespace strings (to preserve offsets)\n    const [doubleQuotes, selectorWithoutDoubleQuotes] = replace(selector, '', '\"', (text, start) => gobbleQuotes(text, '\"', start));\n    const [singleQuotes, selectorWithoutQuotes] = replace(selectorWithoutDoubleQuotes, '', \"'\", (text, start) => gobbleQuotes(text, \"'\", start));\n    // Now that strings are out of the way, extract parens and replace them with parens with whitespace (to preserve offsets)\n    const [parens, selectorWithoutParens] = replace(selectorWithoutQuotes, '', '(', gobbleParens);\n    // Now we have no nested structures and we can parse with regexes\n    const tokens = tokenizeBy(selectorWithoutParens);\n    // Now restore parens and strings in reverse order\n    restoreNested(tokens, parens, /\\(*\\)/, TOKENS_WITH_PARENS);\n    restoreNested(tokens, doubleQuotes, /\"*\"/, TOKENS_WITH_STRINGS);\n    restoreNested(tokens, singleQuotes, /'*'/, TOKENS_WITH_STRINGS);\n    return tokens;\n}\n// Convert a flat list of tokens into a tree of complex & compound selectors\nfunction nestTokens(tokens, { list = true } = {}) {\n    if (list === true && tokens.some((t) => t.type === 'comma')) {\n        const selectors = [];\n        const temp = [];\n        for (let i = 0; i < tokens.length; i += 1) {\n            const token = tokens[i];\n            if (token.type === 'comma') {\n                if (temp.length === 0) {\n                    throw new Error('Incorrect comma at ' + i);\n                }\n                const sub = nestTokens(temp, { list: false });\n                if (sub !== undefined) {\n                    selectors.push(sub);\n                }\n                temp.length = 0;\n            }\n            else {\n                temp.push(token);\n            }\n        }\n        if (temp.length === 0) {\n            throw new Error('Trailing comma');\n        }\n        else {\n            const sub = nestTokens(temp, { list: false });\n            if (sub !== undefined) {\n                selectors.push(sub);\n            }\n        }\n        return { type: 'list', list: selectors };\n    }\n    for (let i = tokens.length - 1; i >= 0; i--) {\n        const token = tokens[i];\n        if (token.type === 'combinator') {\n            const left = nestTokens(tokens.slice(0, i));\n            const right = nestTokens(tokens.slice(i + 1));\n            if (right === undefined) {\n                return undefined;\n            }\n            if (token.content !== ' ' &&\n                token.content !== '~' &&\n                token.content !== '+' &&\n                token.content !== '>') {\n                return undefined;\n            }\n            return {\n                type: 'complex',\n                combinator: token.content,\n                left,\n                right,\n            };\n        }\n    }\n    if (tokens.length === 0) {\n        return undefined;\n    }\n    if (types.isAST(tokens)) {\n        if (tokens.length === 1) {\n            return tokens[0];\n        }\n        // If we're here, there are no combinators, so it's just a list\n        return {\n            type: 'compound',\n            compound: [...tokens], // clone to avoid pointers messing up the AST\n        };\n    }\n    return undefined;\n}\n// Traverse an AST (or part thereof), in depth-first order\nfunction walk(node, callback, o, parent) {\n    if (node === undefined) {\n        return;\n    }\n    if (node.type === 'complex') {\n        walk(node.left, callback, o, node);\n        walk(node.right, callback, o, node);\n    }\n    else if (node.type === 'compound') {\n        for (const n of node.compound) {\n            walk(n, callback, o, node);\n        }\n    }\n    else if (node.type === 'pseudo-class' &&\n        node.subtree !== undefined &&\n        o !== undefined &&\n        o.type === 'pseudo-class' &&\n        o.subtree !== undefined) {\n        walk(node.subtree, callback, o, node);\n    }\n    callback(node, parent);\n}\n/**\n * Parse a CSS selector\n * @param selector {String} The selector to parse\n * @param options.recursive {Boolean} Whether to parse the arguments of pseudo-classes like :is(), :has() etc. Defaults to true.\n * @param options.list {Boolean} Whether this can be a selector list (A, B, C etc). Defaults to true.\n */\nfunction parse(selector, { recursive = true, list = true } = {}) {\n    const tokens = tokenize(selector);\n    if (tokens.length === 0) {\n        return undefined;\n    }\n    const ast = nestTokens(tokens, { list });\n    if (recursive === true) {\n        walk(ast, (node) => {\n            if (node.type === 'pseudo-class' &&\n                node.argument &&\n                node.name !== undefined &&\n                RECURSIVE_PSEUDO_CLASSES.has(node.name)) {\n                node.subtree = parse(node.argument, { recursive: true, list: true });\n            }\n        });\n    }\n    return ast;\n}\n\nexports.RECURSIVE_PSEUDO_CLASSES = RECURSIVE_PSEUDO_CLASSES;\nexports.gobbleParens = gobbleParens;\nexports.gobbleQuotes = gobbleQuotes;\nexports.isEscaped = isEscaped;\nexports.parse = parse;\nexports.replace = replace;\nexports.tokenize = tokenize;\n//# sourceMappingURL=parse.cjs.map\n","'use strict';\n\n/*!\n * Copyright (c) 2017-present Cliqz GmbH. All rights reserved.\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nfunction isAtoms(tokens) {\n    return tokens.every((token) => typeof token !== 'string');\n}\nfunction isAST(tokens) {\n    return tokens.every((token) => token.type !== 'comma' && token.type !== 'combinator');\n}\n\nexports.isAST = isAST;\nexports.isAtoms = isAtoms;\n//# sourceMappingURL=types.cjs.map\n","'use strict';\n\nvar adblockerExtendedSelectors = require('@cliqz/adblocker-extended-selectors');\nvar adblockerContent = require('@cliqz/adblocker-content');\n\n/*!\n * Copyright (c) 2017-present Cliqz GmbH. All rights reserved.\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// TODO - move to @cliqz/adblocker-content\nlet ACTIVE = true;\nlet DOM_MONITOR = null;\nlet UPDATE_EXTENDED_TIMEOUT = null;\nconst PENDING = new Set();\nconst EXTENDED = [];\nconst HIDDEN = new Map();\nfunction unload() {\n    if (DOM_MONITOR !== null) {\n        DOM_MONITOR.stop();\n        DOM_MONITOR = null;\n    }\n}\n/**\n * Because all the filters and matching logic lives in the background of the\n * extension, the content script needs a way to request relevant cosmetic\n * filters for each frame. This channel of communication can be handled in\n * several ways (`connect`, `sendMessage`). Here we will make use of\n * `sendMessage` for one-off communications.\n *\n * `getCosmeticsFiltersWithSendMessage` wraps the logic of communicating with\n * the background and will be used to request cosmetics filters for the current\n * frame.\n *\n * The background should listen to these messages and answer back with lists of\n * filters to be injected in the page.\n */\nfunction getCosmeticsFiltersWithSendMessage(arg) {\n    return new Promise((resolve) => {\n        chrome.runtime.sendMessage({\n            action: 'getCosmeticsFilters',\n            ...arg,\n        }, (response) => {\n            if (response !== undefined) {\n                resolve(response);\n            }\n        });\n    });\n}\nfunction cachedQuerySelector(root, selector, cache) {\n    var _a;\n    // First check if we have a result in cache for this node and selector\n    const cachedElements = (_a = cache.get(root)) === null || _a === void 0 ? void 0 : _a.get(selector);\n    if (cachedElements !== undefined) {\n        return cachedElements;\n    }\n    const selected = new Set(adblockerExtendedSelectors.querySelectorAll(root, selector.ast));\n    // Cache result for next time!\n    if (selector.attribute !== undefined) {\n        let cachedSelectors = cache.get(root);\n        if (cachedSelectors === undefined) {\n            cachedSelectors = new Map();\n            cache.set(root, cachedSelectors);\n        }\n        let cachedSelected = cachedSelectors.get(selector);\n        if (cachedSelected === undefined) {\n            cachedSelected = new Set();\n            cachedSelectors.set(selector, cachedSelected);\n        }\n        for (const element of selected) {\n            cachedSelected.add(element);\n        }\n    }\n    return selected;\n}\nfunction updateExtended() {\n    if (PENDING.size === 0 || EXTENDED.length === 0) {\n        return;\n    }\n    const cache = new Map();\n    const elementsToHide = new Map();\n    // Since we are processing elements in a delayed fashion, it is possible\n    // that some short-lived DOM nodes are already detached. Here we simply\n    // ignore them.\n    const roots = [...PENDING].filter((e) => e.isConnected === true);\n    PENDING.clear();\n    for (const root of roots) {\n        for (const selector of EXTENDED) {\n            for (const element of cachedQuerySelector(root, selector, cache)) {\n                if (selector.remove === true) {\n                    element.textContent = '';\n                    element.remove();\n                }\n                else if (selector.attribute !== undefined && HIDDEN.has(element) === false) {\n                    elementsToHide.set(element, { selector, root });\n                }\n            }\n        }\n    }\n    // Hide new nodes if any\n    for (const [element, { selector, root }] of elementsToHide.entries()) {\n        if (selector.attribute !== undefined) {\n            element.setAttribute(selector.attribute, '');\n            HIDDEN.set(element, { selector, root });\n        }\n    }\n    // Check if some elements should be un-hidden.\n    for (const [element, { selector, root }] of [...HIDDEN.entries()]) {\n        if (selector.attribute !== undefined) {\n            if (root.isConnected === false ||\n                element.isConnected === false ||\n                cachedQuerySelector(root, selector, cache).has(element) === false) {\n                HIDDEN.delete(element);\n                element.removeAttribute(selector.attribute);\n            }\n        }\n    }\n}\n/**\n * Queue `elements` to be processed asynchronously in a batch way (for\n * efficiency). This is important to not do more work than necessary, for\n * example if the same set of nodes is updated multiple times in a raw on\n * user-interaction (e.g. a dropdown); this allows to only check these nodes\n * once, and to not block the UI.\n */\nfunction delayedUpdateExtended(elements) {\n    // If we do not have any extended filters applied to this frame, then we do\n    // not need to do anything. We just ignore.\n    if (EXTENDED.length === 0) {\n        return;\n    }\n    // If root DOM element is already part of PENDING, no need to queue other elements.\n    if (PENDING.has(window.document.documentElement)) {\n        return;\n    }\n    // Queue up new elements into the global PENDING set, which will be processed\n    // in a batch maner from a setTimeout.\n    for (const element of elements) {\n        // If we get the DOM root then we can clear everything else from the queue\n        // since we will be looking at all nodes anyway.\n        if (element === window.document.documentElement) {\n            PENDING.clear();\n            PENDING.add(element);\n            break;\n        }\n        PENDING.add(element);\n    }\n    // Check if we need to trigger a setTimeout to process pending elements.\n    if (UPDATE_EXTENDED_TIMEOUT === null) {\n        UPDATE_EXTENDED_TIMEOUT = setTimeout(() => {\n            UPDATE_EXTENDED_TIMEOUT = null;\n            updateExtended();\n        }, 1000);\n    }\n}\nfunction handleResponseFromBackground(window, { active, scripts, extended }) {\n    if (active === false) {\n        ACTIVE = false;\n        unload();\n        return;\n    }\n    else {\n        ACTIVE = true;\n    }\n    // Inject scripts\n    if (scripts) {\n        for (const script of scripts) {\n            try {\n                adblockerContent.injectScript(script, window.document);\n            }\n            catch (e) {\n                // continue regardless of error\n            }\n        }\n    }\n    // Extended CSS\n    if (extended && extended.length > 0) {\n        EXTENDED.push(...extended);\n        delayedUpdateExtended([window.document.documentElement]);\n    }\n}\n/**\n * Takes care of injecting cosmetic filters in a given window. Responsabilities:\n * - Inject scripts.\n * - Block scripts.\n *\n * NOTE: Custom stylesheets are now injected from background.\n *\n * All this happens by communicating with the background through the\n * `backgroundAction` function (to trigger request the sending of new rules\n * based on a domain or node selectors) and the `handleResponseFromBackground`\n * callback to apply new rules.\n */\nfunction injectCosmetics(window, enableMutationObserver = true, getCosmeticsFilters = getCosmeticsFiltersWithSendMessage) {\n    // Invoked as soon as content-script is injected to ask for background to\n    // inject cosmetics and scripts as soon as possible. Some extra elements\n    // might be inserted later whenever we know more about the content of the\n    // page.\n    getCosmeticsFilters({ lifecycle: 'start', ids: [], classes: [], hrefs: [] }).then((response) => handleResponseFromBackground(window, response));\n    // On DOMContentLoaded, start monitoring the DOM. This means that we will\n    // first check which ids and classes exist in the DOM as a one-off operation;\n    // this will allow the injection of selectors which have a chance to match.\n    // We also register a MutationObserver which will monitor the addition of new\n    // classes and ids, and might trigger extra filters on a per-need basis.\n    window.addEventListener('DOMContentLoaded', () => {\n        DOM_MONITOR = new adblockerContent.DOMMonitor((update) => {\n            if (update.type === 'elements') {\n                if (update.elements.length !== 0) {\n                    delayedUpdateExtended(update.elements);\n                }\n            }\n            else {\n                getCosmeticsFilters({ ...update, lifecycle: 'dom-update' }).then((response) => handleResponseFromBackground(window, response));\n            }\n        });\n        DOM_MONITOR.queryAll(window);\n        // Start observing mutations to detect new ids and classes which would\n        // need to be hidden.\n        if (ACTIVE && enableMutationObserver) {\n            DOM_MONITOR.start(window);\n        }\n    }, { once: true, passive: true });\n    window.addEventListener('pagehide', unload, { once: true, passive: true });\n}\n\nexports.injectCosmetics = injectCosmetics;\n//# sourceMappingURL=adblocker.cjs.map\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","\"use strict\";\n\nrequire(\"./content-script\");"],"names":[],"sourceRoot":""}